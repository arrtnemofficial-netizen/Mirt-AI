# ğŸ‡ºğŸ‡¦ MIRT-AI: ĞŸĞĞ’ĞĞ˜Ğ™ Ğ“ĞĞ™Ğ” Ğ ĞĞ—Ğ ĞĞ‘ĞĞ˜ĞšĞ

> **ĞÑÑ‚Ğ°Ğ½Ğ½Ñ” Ğ¾Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ½Ñ:** 9 Ğ³Ñ€ÑƒĞ´Ğ½Ñ 2025  
> **Ğ’ĞµÑ€ÑÑ–Ñ:** 3.0 (Agentic update)  
> **Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ:** âœ… 924 Ñ‚ĞµÑÑ‚Ğ¸ Ğ¿Ñ€Ğ¾Ğ¹Ğ´ĞµĞ½Ğ¾, 3 warnings (ÑÑ‚Ğ¾Ñ€Ğ¾Ğ½Ğ½Ñ– Ğ±Ñ–Ğ±Ğ»Ñ–Ğ¾Ñ‚ĞµĞºĞ¸)
>
> ğŸ“š **Ğ¦ĞµĞ½Ñ‚Ñ€Ğ°Ğ»ÑŒĞ½Ğ¸Ğ¹ Ñ–Ğ½Ğ´ĞµĞºÑ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ñ–Ñ—:** [../DOCUMENTATION.md](../DOCUMENTATION.md)

---

## ğŸ“‹ Ğ—ĞœĞ†Ğ¡Ğ¢

1. [Ğ©Ğ¾ Ñ†Ğµ Ğ·Ğ° Ğ¿Ñ€Ğ¾Ñ”ĞºÑ‚](#1-Ñ‰Ğ¾-Ñ†Ğµ-Ğ·Ğ°-Ğ¿Ñ€Ğ¾Ñ”ĞºÑ‚)
2. [Ğ¨Ğ²Ğ¸Ğ´ĞºĞ¸Ğ¹ ÑÑ‚Ğ°Ñ€Ñ‚](#2-ÑˆĞ²Ğ¸Ğ´ĞºĞ¸Ğ¹-ÑÑ‚Ğ°Ñ€Ñ‚)
3. [ĞÑ€Ñ…Ñ–Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ° ÑĞ¸ÑÑ‚ĞµĞ¼Ğ¸](#3-Ğ°Ñ€Ñ…Ñ–Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°-ÑĞ¸ÑÑ‚ĞµĞ¼Ğ¸)
4. [Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ğ°Ğ¿Ğ¾Ğº](#4-ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ°-Ğ¿Ğ°Ğ¿Ğ¾Ğº)
5. [ĞĞ³ĞµĞ½Ñ‚Ğ¸ (AI)](#5-Ğ°Ğ³ĞµĞ½Ñ‚Ğ¸-ai)
6. [Vision ÑĞ¸ÑÑ‚ĞµĞ¼Ğ°](#6-vision-ÑĞ¸ÑÑ‚ĞµĞ¼Ğ°)
7. [Ğ¡ĞµÑ€Ğ²Ñ–ÑĞ¸](#7-ÑĞµÑ€Ğ²Ñ–ÑĞ¸)
8. [Ğ¢ĞµÑÑ‚ÑƒĞ²Ğ°Ğ½Ğ½Ñ](#8-Ñ‚ĞµÑÑ‚ÑƒĞ²Ğ°Ğ½Ğ½Ñ)
9. [ĞšĞ¾Ğ½Ñ„Ñ–Ğ³ÑƒÑ€Ğ°Ñ†Ñ–Ñ](#9-ĞºĞ¾Ğ½Ñ„Ñ–Ğ³ÑƒÑ€Ğ°Ñ†Ñ–Ñ)
10. [Ğ¢Ğ¸Ğ¿Ğ¾Ğ²Ñ– Ğ¿Ğ¾Ğ¼Ğ¸Ğ»ĞºĞ¸](#10-Ñ‚Ğ¸Ğ¿Ğ¾Ğ²Ñ–-Ğ¿Ğ¾Ğ¼Ğ¸Ğ»ĞºĞ¸)
11. [ĞšĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ¸](#11-ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ¸)

---

## 1. Ğ©Ğ Ğ¦Ğ• Ğ—Ğ ĞŸĞ ĞĞ„ĞšĞ¢

**MIRT-AI** â€” Ñ†Ğµ AI-ĞºĞ¾Ğ½ÑÑƒĞ»ÑŒÑ‚Ğ°Ğ½Ñ‚ Ğ´Ğ»Ñ Ğ¼Ğ°Ğ³Ğ°Ğ·Ğ¸Ğ½Ñƒ Ğ´Ğ¸Ñ‚ÑÑ‡Ğ¾Ğ³Ğ¾ Ğ¾Ğ´ÑĞ³Ñƒ MIRT.

### Ğ©Ğ¾ Ğ²Ğ¼Ñ–Ñ”:
- ğŸ–¼ï¸ **Ğ Ğ¾Ğ·Ğ¿Ñ–Ğ·Ğ½Ğ°Ğ²Ğ°Ñ‚Ğ¸ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ¸ Ğ¿Ğ¾ Ñ„Ğ¾Ñ‚Ğ¾** (Vision Agent)
- ğŸ’¬ **ĞšĞ¾Ğ½ÑÑƒĞ»ÑŒÑ‚ÑƒĞ²Ğ°Ñ‚Ğ¸ ĞºĞ»Ñ–Ñ”Ğ½Ñ‚Ñ–Ğ²** (Support Agent)
- ğŸ’³ **ĞÑ„Ğ¾Ñ€Ğ¼Ğ»ÑÑ‚Ğ¸ Ğ·Ğ°Ğ¼Ğ¾Ğ²Ğ»ĞµĞ½Ğ½Ñ** (Payment Agent)
- ğŸ“¦ **Ğ†Ğ½Ñ‚ĞµĞ³Ñ€ÑƒĞ²Ğ°Ñ‚Ğ¸ÑÑ Ğ· CRM** (Snitkix)

### Ğ¢ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ñ–Ñ—:
| ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ | Ğ¢ĞµÑ…Ğ½Ğ¾Ğ»Ğ¾Ğ³Ñ–Ñ |
|-----------|------------|
| **AI Framework** | PydanticAI 1.23+ |
| **ĞÑ€ĞºĞµÑÑ‚Ñ€Ğ°Ñ†Ñ–Ñ** | LangGraph |
| **LLM** | OpenAI GPT-4o / OpenRouter (Grok) |
| **Backend** | FastAPI + Uvicorn |
| **Ğ‘Ğ°Ğ·Ğ° Ğ´Ğ°Ğ½Ğ¸Ñ…** | Supabase (PostgreSQL) |
| **Ğ§ĞµÑ€Ğ³Ğ¸** | Celery + Redis |
| **Ğ¢ĞµÑÑ‚Ğ¸** | Pytest (924 Ñ‚ĞµÑÑ‚Ñ–Ğ²) |

---

## 2. Ğ¨Ğ’Ğ˜Ğ”ĞšĞ˜Ğ™ Ğ¡Ğ¢ĞĞ Ğ¢

### 2.1. ĞšĞ»Ğ¾Ğ½ÑƒĞ²Ğ°Ğ½Ğ½Ñ Ñ‚Ğ° Ğ²ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ½Ñ

```bash
git clone https://github.com/arrtnemofficial-netizen/Mirt-AI.git
cd Mirt-AI

# Ğ¡Ñ‚Ğ²Ğ¾Ñ€Ğ¸Ñ‚Ğ¸ Ğ²Ñ–Ñ€Ñ‚ÑƒĞ°Ğ»ÑŒĞ½Ğµ ÑĞµÑ€ĞµĞ´Ğ¾Ğ²Ğ¸Ñ‰Ğµ
python -m venv venv
venv\Scripts\activate  # Windows
# source venv/bin/activate  # Linux/Mac

# Ğ’ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚Ğ¸ Ğ·Ğ°Ğ»ĞµĞ¶Ğ½Ğ¾ÑÑ‚Ñ–
pip install -e ".[dev]"
```

### 2.2. ĞĞ°Ğ»Ğ°ÑˆÑ‚ÑƒĞ²Ğ°Ğ½Ğ½Ñ .env

```bash
cp .env.example .env
# Ğ’Ñ–Ğ´Ñ€ĞµĞ´Ğ°Ğ³ÑƒĞ¹ .env â€” Ğ²ÑÑ‚Ğ°Ğ² ÑĞ²Ğ¾Ñ— ĞºĞ»ÑÑ‡Ñ– API
```

**ĞœÑ–Ğ½Ñ–Ğ¼Ğ°Ğ»ÑŒĞ½Ñ– Ğ·Ğ¼Ñ–Ğ½Ğ½Ñ–:**
```env
LLM_PROVIDER=openrouter
OPENROUTER_API_KEY=sk-or-v1-xxx
OPENROUTER_BASE_URL=https://openrouter.ai/api/v1
AI_MODEL=x-ai/grok-3-mini-beta

SUPABASE_URL=https://xxx.supabase.co
SUPABASE_API_KEY=eyJxxx
```

### 2.3. Ğ—Ğ°Ğ¿ÑƒÑĞº Ñ‚ĞµÑÑ‚Ñ–Ğ²

```bash
pytest tests/ -v
```

### 2.4. Ğ—Ğ°Ğ¿ÑƒÑĞº ÑĞµÑ€Ğ²ĞµÑ€Ğ°

```bash
uvicorn src.server.main:app --reload --port 8000
```

---

## 3. ĞĞ Ğ¥Ğ†Ğ¢Ğ•ĞšĞ¢Ğ£Ğ Ğ Ğ¡Ğ˜Ğ¡Ğ¢Ğ•ĞœĞ˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      TELEGRAM / MANYCHAT                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     FastAPI (src/server/)                    â”‚
â”‚  /api/manychat/handle  â”‚  /api/telegram/webhook              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  LangGraph (src/agents/langgraph/)           â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Moderat. â”‚ â†’ â”‚  Intent  â”‚ â†’ â”‚ Vision   â”‚ â†’ â”‚  Agent   â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                              â”‚
â”‚  ĞĞ¾Ğ´Ğ¸: moderation, intent, vision, agent, offer, payment,   â”‚
â”‚        upsell, crm_error, validation, escalation, memory.   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              PydanticAI Agents (src/agents/pydantic/)        â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ support_agent  â”‚  â”‚  vision_agent  â”‚  â”‚ payment_agent  â”‚ â”‚
â”‚  â”‚ (ĞºĞ¾Ğ½ÑÑƒĞ»ÑŒÑ‚Ğ°Ñ†Ñ–Ñ—) â”‚  â”‚ (Ñ„Ğ¾Ñ‚Ğ¾-Ğ°Ğ½Ğ°Ğ»Ñ–Ğ·) â”‚  â”‚ (Ğ·Ğ°Ğ¼Ğ¾Ğ²Ğ»ĞµĞ½Ğ½Ñ)   â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Services (src/services/)                   â”‚
â”‚                                                              â”‚
â”‚  CatalogService â”‚ OrderService â”‚ Observability â”‚ Supabase   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. Ğ¡Ğ¢Ğ Ğ£ĞšĞ¢Ğ£Ğ Ğ ĞŸĞĞŸĞĞš

```
Mirt-AI/
â”‚
â”œâ”€â”€ src/                          # ğŸ§  ĞÑĞ½Ğ¾Ğ²Ğ½Ğ¸Ğ¹ ĞºĞ¾Ğ´
â”‚   â”œâ”€â”€ agents/                   # AI Ğ°Ğ³ĞµĞ½Ñ‚Ğ¸
â”‚   â”‚   â”œâ”€â”€ pydantic/             # PydanticAI Ğ°Ğ³ĞµĞ½Ñ‚Ğ¸
â”‚   â”‚   â”‚   â”œâ”€â”€ support_agent.py  # ĞšĞ¾Ğ½ÑÑƒĞ»ÑŒÑ‚Ğ°Ğ½Ñ‚ "ĞĞ»ÑŒĞ³Ğ°"
â”‚   â”‚   â”‚   â”œâ”€â”€ vision_agent.py   # Ğ Ğ¾Ğ·Ğ¿Ñ–Ğ·Ğ½Ğ°Ğ²Ğ°Ğ½Ğ½Ñ Ñ„Ğ¾Ñ‚Ğ¾
â”‚   â”‚   â”‚   â”œâ”€â”€ payment_agent.py  # ĞÑ„Ğ¾Ñ€Ğ¼Ğ»ĞµĞ½Ğ½Ñ Ğ·Ğ°Ğ¼Ğ¾Ğ²Ğ»ĞµĞ½ÑŒ
â”‚   â”‚   â”‚   â”œâ”€â”€ models.py         # Pydantic Ğ¼Ğ¾Ğ´ĞµĞ»Ñ– Ğ²Ñ–Ğ´Ğ¿Ğ¾Ğ²Ñ–Ğ´ĞµĞ¹ (OUTPUT_CONTRACT)
â”‚   â”‚   â”‚   â””â”€â”€ deps.py           # AgentDeps (Ğ·Ğ°Ğ»ĞµĞ¶Ğ½Ğ¾ÑÑ‚Ñ– + MemoryService)
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ langgraph/            # LangGraph Ğ¾Ñ€ĞºĞµÑÑ‚Ñ€Ğ°Ñ†Ñ–Ñ
â”‚   â”‚       â”œâ”€â”€ graph.py          # Ğ“Ğ¾Ğ»Ğ¾Ğ²Ğ½Ğ¸Ğ¹ production-Ğ³Ñ€Ğ°Ñ„
â”‚   â”‚       â”œâ”€â”€ state.py          # ConversationState + reducers
â”‚   â”‚       â”œâ”€â”€ edges.py          # master_router + routing
â”‚   â”‚       â”œâ”€â”€ checkpointer.py   # Persistence (Memory/Postgres)
â”‚   â”‚       â”œâ”€â”€ streaming.py      # Streaming Ñ‚Ğ¾ĞºĞµĞ½Ñ–Ğ²/Ğ¿Ğ¾Ğ´Ñ–Ğ¹
â”‚   â”‚       â”œâ”€â”€ time_travel.py    # Ğ†ÑÑ‚Ğ¾Ñ€Ñ–Ñ ÑÑ‚Ğ°Ğ½Ñ–Ğ² / rollback / fork
â”‚   â”‚       â””â”€â”€ nodes/            # ĞĞ¾Ğ´Ğ¸ Ğ³Ñ€Ğ°Ñ„Ğ°
â”‚   â”‚           â”œâ”€â”€ vision.py     # vision_node
â”‚   â”‚           â”œâ”€â”€ offer.py      # offer_node (Multi-Role Deliberation)
â”‚   â”‚           â”œâ”€â”€ agent.py      # agent_node (text)
â”‚   â”‚           â”œâ”€â”€ payment.py    # payment_node (HITL)
â”‚   â”‚           â”œâ”€â”€ upsell.py     # upsell_node
â”‚   â”‚           â”œâ”€â”€ crm_error.py  # crm_error_node
â”‚   â”‚           â”œâ”€â”€ validation.py # validation_node
â”‚   â”‚           â”œâ”€â”€ escalation.py # escalation_node
â”‚   â”‚           â”œâ”€â”€ memory.py     # memory_context_node / memory_update_node
â”‚   â”‚           â””â”€â”€ utils.py      # Ğ¥ĞµĞ»Ğ¿ĞµÑ€Ğ¸
â”‚   â”‚
â”‚   â”œâ”€â”€ services/                 # Ğ‘Ñ–Ğ·Ğ½ĞµÑ-Ğ»Ğ¾Ğ³Ñ–ĞºĞ°
â”‚   â”‚   â”œâ”€â”€ catalog_service.py    # Ğ Ğ¾Ğ±Ğ¾Ñ‚Ğ° Ğ· ĞºĞ°Ñ‚Ğ°Ğ»Ğ¾Ğ³Ğ¾Ğ¼ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ñ–Ğ²
â”‚   â”‚   â”œâ”€â”€ order_service.py      # OrderService / CRM Ñ–Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ñ–Ñ
â”‚   â”‚   â”œâ”€â”€ supabase_client.py    # ĞšĞ»Ñ–Ñ”Ğ½Ñ‚ Supabase
â”‚   â”‚   â”œâ”€â”€ observability.py      # Ğ›Ğ¾Ğ³ÑƒĞ²Ğ°Ğ½Ğ½Ñ Ñ‚Ğ° Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ¸
â”‚   â”‚   â””â”€â”€ product_matcher.py    # ĞĞ¾Ñ€Ğ¼Ğ°Ğ»Ñ–Ğ·Ğ°Ñ†Ñ–Ñ Ğ½Ğ°Ğ·Ğ² Ñ‚Ğ¾Ğ²Ğ°Ñ€Ñ–Ğ²
â”‚   â”‚
â”‚   â”œâ”€â”€ core/                     # Ğ¯Ğ´Ñ€Ğ¾ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ¸
â”‚   â”‚   â”œâ”€â”€ prompt_registry.py    # Ğ ĞµÑ”ÑÑ‚Ñ€ Ğ¿Ñ€Ğ¾Ğ¼Ğ¿Ñ‚Ñ–Ğ²
â”‚   â”‚   â”œâ”€â”€ state_machine.py      # FSM (ÑÑ‚Ğ°Ğ½Ğ¸ Ğ´Ñ–Ğ°Ğ»Ğ¾Ğ³Ñƒ)
â”‚   â”‚   â””â”€â”€ config.py             # ĞĞ°Ğ»Ğ°ÑˆÑ‚ÑƒĞ²Ğ°Ğ½Ğ½Ñ
â”‚   â”‚
â”‚   â”œâ”€â”€ server/                   # FastAPI ÑĞµÑ€Ğ²ĞµÑ€
â”‚   â”‚   â””â”€â”€ main.py               # Ğ¢Ğ¾Ñ‡ĞºĞ° Ğ²Ñ…Ğ¾Ğ´Ñƒ
â”‚   â”‚
â”‚   â””â”€â”€ workers/                  # Celery Ğ²Ğ¾Ñ€ĞºĞµÑ€Ğ¸
â”‚       â””â”€â”€ tasks/                # Ğ¤Ğ¾Ğ½Ğ¾Ğ²Ñ– Ğ·Ğ°Ğ´Ğ°Ñ‡Ñ–
â”‚
â”œâ”€â”€ data/                         # ğŸ“¦ Ğ”Ğ°Ğ½Ñ–
â”‚   â”œâ”€â”€ prompts/                  # ĞŸÑ€Ğ¾Ğ¼Ğ¿Ñ‚Ğ¸ (MD/YAML)
â”‚   â”‚   â”œâ”€â”€ system/main.md        # Ğ“Ğ¾Ğ»Ğ¾Ğ²Ğ½Ğ¸Ğ¹ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ½Ğ¸Ğ¹ Ğ¿Ñ€Ğ¾Ğ¼Ğ¿Ñ‚
â”‚   â”‚   â””â”€â”€ states/               # ĞŸÑ€Ğ¾Ğ¼Ğ¿Ñ‚Ğ¸ Ğ´Ğ»Ñ ÑÑ‚Ğ°Ğ½Ñ–Ğ² FSM
â”‚   â”‚
â”‚   â””â”€â”€ vision/                   # Vision ÑĞ¸ÑÑ‚ĞµĞ¼Ğ°
â”‚       â”œâ”€â”€ products_master.yaml  # ğŸ”‘ Ğ“ĞĞ›ĞĞ’ĞĞ˜Ğ™ ĞšĞĞ¢ĞĞ›ĞĞ“
â”‚       â”œâ”€â”€ generate.py           # Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ‚Ğ¾Ñ€ Ğ°Ñ€Ñ‚ĞµÑ„Ğ°ĞºÑ‚Ñ–Ğ²
â”‚       â”œâ”€â”€ README.md             # Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ñ–Ñ vision
â”‚       â””â”€â”€ generated/            # Ğ—Ğ³ĞµĞ½ĞµÑ€Ğ¾Ğ²Ğ°Ğ½Ñ– Ñ„Ğ°Ğ¹Ğ»Ğ¸
â”‚
â”œâ”€â”€ tests/                        # ğŸ§ª Ğ¢ĞµÑÑ‚Ğ¸ (~900+)
â”‚   â”œâ”€â”€ unit/                     # Ğ®Ğ½Ñ–Ñ‚-Ñ‚ĞµÑÑ‚Ğ¸
â”‚   â”œâ”€â”€ integration/              # Ğ†Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ñ–Ğ¹Ğ½Ñ– Ñ‚ĞµÑÑ‚Ğ¸
â”‚   â”œâ”€â”€ test_vision_health.py     # Health-Ñ‚ĞµÑÑ‚Ğ¸ vision
â”‚   â””â”€â”€ test_product_matcher.py   # Ğ¢ĞµÑÑ‚Ğ¸ Ğ½Ğ¾Ñ€Ğ¼Ğ°Ğ»Ñ–Ğ·Ğ°Ñ†Ñ–Ñ— Ğ½Ğ°Ğ·Ğ²
â”‚
â”œâ”€â”€ scripts/                      # ğŸ”§ Ğ¡ĞºÑ€Ğ¸Ğ¿Ñ‚Ğ¸
â”‚   â””â”€â”€ generate_vision_artifacts.py  # Ğ’Ñ€Ğ°Ğ¿Ğ¿ĞµÑ€ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ‚Ğ¾Ñ€Ğ°
â”‚
â”œâ”€â”€ docs/                         # ğŸ“š Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ñ–Ñ
â”‚
â”œâ”€â”€ pyproject.toml                # Ğ—Ğ°Ğ»ĞµĞ¶Ğ½Ğ¾ÑÑ‚Ñ– Ğ¿Ñ€Ğ¾Ñ”ĞºÑ‚Ñƒ
â”œâ”€â”€ requirements.txt              # ĞĞ»ÑŒÑ‚ĞµÑ€Ğ½Ğ°Ñ‚Ğ¸Ğ²Ğ½Ğ¸Ğ¹ ÑĞ¿Ğ¸ÑĞ¾Ğº Ğ·Ğ°Ğ»ĞµĞ¶Ğ½Ğ¾ÑÑ‚ĞµĞ¹
â””â”€â”€ .env.example                  # ĞŸÑ€Ğ¸ĞºĞ»Ğ°Ğ´ Ğ·Ğ¼Ñ–Ğ½Ğ½Ğ¸Ñ… ÑĞµÑ€ĞµĞ´Ğ¾Ğ²Ğ¸Ñ‰Ğ°
```

---

## 5. ĞĞ“Ğ•ĞĞ¢Ğ˜ (AI)

### 5.1. Support Agent (`support_agent.py`)

**Ğ Ğ¾Ğ»ÑŒ:** AI-ĞºĞ¾Ğ½ÑÑƒĞ»ÑŒÑ‚Ğ°Ğ½Ñ‚ "ĞĞ»ÑŒĞ³Ğ°" â€” Ğ²Ñ–Ğ´Ğ¿Ğ¾Ğ²Ñ–Ğ´Ğ°Ñ” Ğ½Ğ° Ğ¿Ğ¸Ñ‚Ğ°Ğ½Ğ½Ñ ĞºĞ»Ñ–Ñ”Ğ½Ñ‚Ñ–Ğ².

**Ğ’Ñ…Ñ–Ğ´:** Ğ¢ĞµĞºÑÑ‚Ğ¾Ğ²Ğµ Ğ¿Ğ¾Ğ²Ñ–Ğ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ½Ñ ĞºĞ¾Ñ€Ğ¸ÑÑ‚ÑƒĞ²Ğ°Ñ‡Ğ°  
**Ğ’Ğ¸Ñ…Ñ–Ğ´:** `SupportResponse` (messages, products, metadata)

```python
from src.agents.pydantic.support_agent import run_support

response = await run_support(
    message="Ğ¡ĞºÑ–Ğ»ÑŒĞºĞ¸ ĞºĞ¾ÑˆÑ‚ÑƒÑ” ĞºĞ¾ÑÑ‚ÑĞ¼ Ğ›Ğ°Ğ³ÑƒĞ½Ğ°?",
    deps=deps,
)
# response.messages = [{"type": "text", "content": "ĞšĞ¾ÑÑ‚ÑĞ¼ Ğ›Ğ°Ğ³ÑƒĞ½Ğ°..."}]
```

### 5.2. Vision Agent (`vision_agent.py`)

**Ğ Ğ¾Ğ»ÑŒ:** Ğ Ğ¾Ğ·Ğ¿Ñ–Ğ·Ğ½Ğ°Ñ” Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ¸ Ğ½Ğ° Ñ„Ğ¾Ñ‚Ğ¾.

**Ğ’Ñ…Ñ–Ğ´:** Ğ¤Ğ¾Ñ‚Ğ¾ (image_url) + Ñ‚ĞµĞºÑÑ‚  
**Ğ’Ğ¸Ñ…Ñ–Ğ´:** `VisionResponse` (identified_product, confidence, reply_to_user)

```python
from src.agents.pydantic.vision_agent import run_vision

deps.image_url = "https://cdn.sitniks.com/..."
deps.has_image = True

response = await run_vision(message="Ğ©Ğ¾ Ñ†Ğµ Ğ·Ğ° Ñ‚Ğ¾Ğ²Ğ°Ñ€?", deps=deps)
# response.identified_product.name = "ĞšĞ¾ÑÑ‚ÑĞ¼ Ğ›Ğ°Ğ³ÑƒĞ½Ğ°"
# response.confidence = 0.95
```

### 5.3. Payment Agent (`payment_agent.py`)

**Ğ Ğ¾Ğ»ÑŒ:** Ğ—Ğ±Ğ¸Ñ€Ğ°Ñ” Ğ´Ğ°Ğ½Ñ– Ğ´Ğ»Ñ Ğ·Ğ°Ğ¼Ğ¾Ğ²Ğ»ĞµĞ½Ğ½Ñ.

**Ğ’Ñ…Ñ–Ğ´:** Ğ”Ğ°Ğ½Ñ– ĞºĞ»Ñ–Ñ”Ğ½Ñ‚Ğ°  
**Ğ’Ğ¸Ñ…Ñ–Ğ´:** `PaymentResponse` (order_data, next_step)

### 5.4. Ğ’Ğ°Ğ¶Ğ»Ğ¸Ğ²Ñ– Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»Ğ° PydanticAI

| ĞŸÑ€Ğ°Ğ²Ğ¸Ğ»Ğ¾ | ĞŸÑ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ¾ âœ… | ĞĞµĞ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ¾ âŒ |
|---------|-------------|----------------|
| Ğ¢Ğ¸Ğ¿ Ğ²Ğ¸Ñ…Ğ¾Ğ´Ñƒ | `output_type=VisionResponse` | `result_type=...` |
| ĞÑ‚Ñ€Ğ¸Ğ¼Ğ°Ğ½Ğ½Ñ Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ñƒ | `result.output` | `result.response` |
| Ğ¢Ğ°Ğ¹Ğ¼Ğ°ÑƒÑ‚ | `timeout=120` | `timeout=30` |
| ĞœĞ¾Ğ´ĞµĞ»ÑŒ | `OpenAIChatModel` | `OpenAIModel` |

---

## 6. VISION Ğ¡Ğ˜Ğ¡Ğ¢Ğ•ĞœĞ

### 6.1. Ğ¯Ğº Ğ¿Ñ€Ğ°Ñ†ÑÑ”

```
products_master.yaml  â†’  generate.py  â†’  generated/
     (Ñ€ĞµĞ´Ğ°Ğ³ÑƒÑ”Ñˆ)           (Ğ·Ğ°Ğ¿ÑƒÑĞºĞ°Ñ”Ñˆ)     (Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡Ğ½Ğ¾)
```

### 6.2. Ğ¤Ğ°Ğ¹Ğ»Ğ¸

| Ğ¤Ğ°Ğ¹Ğ» | ĞŸÑ€Ğ¸Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ½Ñ |
|------|-------------|
| `products_master.yaml` | ğŸ”‘ Ğ„Ğ´Ğ¸Ğ½Ğµ Ğ´Ğ¶ĞµÑ€ĞµĞ»Ğ¾ Ğ¿Ñ€Ğ°Ğ²Ğ´Ğ¸ â€” Ğ²ÑÑ– Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ¸, ĞºĞ¾Ğ»ÑŒĞ¾Ñ€Ğ¸, Ñ†Ñ–Ğ½Ğ¸ |
| `generate.py` | Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ‚Ğ¾Ñ€ Ğ°Ñ€Ñ‚ĞµÑ„Ğ°ĞºÑ‚Ñ–Ğ² |
| `generated/model_rules.yaml` | ĞŸÑ€Ğ°Ğ²Ğ¸Ğ»Ğ° Ğ´Ğ»Ñ Ğ¿Ñ€Ğ¾Ğ¼Ğ¿Ñ‚Ñƒ |
| `generated/vision_guide.json` | Ğ”ĞµÑ‚Ğ°Ğ»ÑŒĞ½Ğ¸Ğ¹ Ğ³Ğ°Ğ¹Ğ´ Ñ€Ğ¾Ğ·Ğ¿Ñ–Ğ·Ğ½Ğ°Ğ²Ğ°Ğ½Ğ½Ñ |
| `generated/test_set.json` | Ğ¢ĞµÑÑ‚Ğ¾Ğ²Ğ¸Ğ¹ Ğ½Ğ°Ğ±Ñ–Ñ€ (29 ĞºĞµĞ¹ÑÑ–Ğ²) |
| `generated/canonical_names.json` | Mapping Ğ½Ğ°Ğ·Ğ² (64 Ğ²Ğ°Ñ€Ñ–Ğ°Ñ†Ñ–Ñ—) |

### 6.3. Ğ¯Ğº Ğ´Ğ¾Ğ´Ğ°Ñ‚Ğ¸ Ğ½Ğ¾Ğ²Ğ¸Ğ¹ Ñ‚Ğ¾Ğ²Ğ°Ñ€

1. Ğ’Ñ–Ğ´ĞºÑ€Ğ¸Ğ¹ `data/vision/products_master.yaml`
2. Ğ”Ğ¾Ğ´Ğ°Ğ¹ Ğ½Ğ¾Ğ²Ğ¸Ğ¹ Ğ¿Ñ€Ğ¾Ğ´ÑƒĞºÑ‚ Ğ·Ğ° ÑˆĞ°Ğ±Ğ»Ğ¾Ğ½Ğ¾Ğ¼:

```yaml
products:
  kostum_noviy:
    id: 12345678
    name: "ĞšĞ¾ÑÑ‚ÑĞ¼ ĞĞ¾Ğ²Ğ¸Ğ¹"
    category: "ĞºĞ¾ÑÑ‚ÑĞ¼Ğ¸"
    price_type: "uniform"
    price: 1990
    colors:
      Ñ€Ğ¾Ğ¶ĞµĞ²Ğ¸Ğ¹:
        photo_url: "https://cdn.sitniks.com/..."
        sku: "12345678-PINK"
    visual:
      fabric_type: "Ğ±Ğ°Ğ²Ğ¾Ğ²Ğ½Ğ°"
      key_markers:
        - "Ğ£Ğ½Ñ–ĞºĞ°Ğ»ÑŒĞ½Ğ° Ğ¾Ğ·Ğ½Ğ°ĞºĞ° 1"
        - "Ğ£Ğ½Ñ–ĞºĞ°Ğ»ÑŒĞ½Ğ° Ğ¾Ğ·Ğ½Ğ°ĞºĞ° 2"
    distinction:
      confused_with: ["ĞšĞ¾ÑÑ‚ÑĞ¼ Ğ¡Ñ…Ğ¾Ğ¶Ğ¸Ğ¹"]
      critical_check: "Ğ¯Ğº Ğ²Ñ–Ğ´Ñ€Ñ–Ğ·Ğ½Ğ¸Ñ‚Ğ¸"
```

3. Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸ Ğ³ĞµĞ½ĞµÑ€Ğ°Ñ‚Ğ¾Ñ€:
```bash
python data/vision/generate.py
```

4. ĞŸĞµÑ€ĞµĞ²Ñ–Ñ€ Ñ‚ĞµÑÑ‚Ğ°Ğ¼Ğ¸:
```bash
pytest tests/test_vision_health.py tests/test_product_matcher.py -v
```

---

## 7. Ğ¡Ğ•Ğ Ğ’Ğ†Ğ¡Ğ˜

### 7.1. CatalogService (`catalog_service.py`)

Ğ Ğ¾Ğ±Ğ¾Ñ‚Ğ° Ğ· ĞºĞ°Ñ‚Ğ°Ğ»Ğ¾Ğ³Ğ¾Ğ¼ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ñ–Ğ² Ñ‡ĞµÑ€ĞµĞ· Supabase.

```python
from src.services.catalog_service import CatalogService

catalog = CatalogService()
products = await catalog.search_products("Ğ»Ğ°Ğ³ÑƒĞ½Ğ°")
price = CatalogService.get_price_for_size(product, size="122")
```

**ĞœĞµÑ‚Ğ¾Ğ´Ğ¸:**
- `search_products(query)` â€” Ğ¿Ğ¾ÑˆÑƒĞº Ñ‚Ğ¾Ğ²Ğ°Ñ€Ñ–Ğ²
- `get_product_by_id(id)` â€” Ğ¾Ñ‚Ñ€Ğ¸Ğ¼Ğ°Ñ‚Ğ¸ Ñ‚Ğ¾Ğ²Ğ°Ñ€ Ğ¿Ğ¾ ID
- `get_products_for_vision()` â€” Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ¸ Ğ´Ğ»Ñ vision Ğ°Ğ³ĞµĞ½Ñ‚Ğ°
- `check_stock(product_id, size)` â€” Ğ¿ĞµÑ€ĞµĞ²Ñ–Ñ€ĞºĞ° Ğ½Ğ°ÑĞ²Ğ½Ğ¾ÑÑ‚Ñ–

### 7.2. Observability (`observability.py`)

Ğ›Ğ¾Ğ³ÑƒĞ²Ğ°Ğ½Ğ½Ñ Ñ‚Ğ° Ğ¼ĞµÑ‚Ñ€Ğ¸ĞºĞ¸.

```python
from src.services.observability import log_agent_step, track_metric

log_agent_step(
    session_id="123",
    state="STATE_2_VISION",
    intent="PHOTO_IDENT",
    event="vision_complete",
    latency_ms=1500,
)

track_metric("vision_latency_ms", 1500, tags={"model": "grok"})
```

---

## 8. Ğ¢Ğ•Ğ¡Ğ¢Ğ£Ğ’ĞĞĞĞ¯

### 8.1. Ğ—Ğ°Ğ¿ÑƒÑĞº Ğ²ÑÑ–Ñ… Ñ‚ĞµÑÑ‚Ñ–Ğ²

```bash
pytest tests/ -v
```

### 8.2. ĞšĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ñ–Ñ— Ñ‚ĞµÑÑ‚Ñ–Ğ²

| ĞšĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ñ–Ñ | Ğ¨Ğ»ÑÑ… | ĞšÑ–Ğ»ÑŒĞºÑ–ÑÑ‚ÑŒ |
|-----------|------|-----------|
| Unit | `tests/unit/` | ~400 |
| Integration | `tests/integration/` | ~150 |
| Vision Health | `tests/test_vision_health.py` | 18 |
| Product Matcher | `tests/test_product_matcher.py` | 64 |
| FSM | `tests/test_fsm_invariants.py` | ~20 |

### 8.3. Ğ¨Ğ²Ğ¸Ğ´ĞºĞ° Ğ¿ĞµÑ€ĞµĞ²Ñ–Ñ€ĞºĞ° vision

```bash
pytest tests/test_vision_health.py tests/test_product_matcher.py -v
```

---

## 9. ĞšĞĞĞ¤Ğ†Ğ“Ğ£Ğ ĞĞ¦Ğ†Ğ¯

### 9.1. Ğ—Ğ¼Ñ–Ğ½Ğ½Ñ– ÑĞµÑ€ĞµĞ´Ğ¾Ğ²Ğ¸Ñ‰Ğ° (.env)

```env
# LLM Provider
LLM_PROVIDER=openrouter          # openai | openrouter
OPENAI_API_KEY=sk-xxx            # Ğ”Ğ»Ñ OpenAI
OPENROUTER_API_KEY=sk-or-v1-xxx  # Ğ”Ğ»Ñ OpenRouter
OPENROUTER_BASE_URL=https://openrouter.ai/api/v1

# ĞœĞ¾Ğ´ĞµĞ»Ñ–
LLM_MODEL_GPT=gpt-4o             # Ğ”Ğ»Ñ OpenAI
LLM_MODEL_GROK=x-ai/grok-3-mini-beta  # Ğ”Ğ»Ñ OpenRouter
AI_MODEL=x-ai/grok-3-mini-beta   # Fallback

# Supabase
SUPABASE_URL=https://xxx.supabase.co
SUPABASE_API_KEY=eyJxxx

# Redis (Ğ´Ğ»Ñ Celery)
REDIS_URL=redis://localhost:6379/0
```

### 9.2. Ğ’ĞµÑ€ÑÑ–Ñ— Ğ·Ğ°Ğ»ĞµĞ¶Ğ½Ğ¾ÑÑ‚ĞµĞ¹

| ĞŸĞ°ĞºĞµÑ‚ | Ğ’ĞµÑ€ÑÑ–Ñ |
|-------|--------|
| pydantic-ai | 1.23.0 |
| openai | 2.9.0 |
| supabase | 2.25.0 |
| langgraph | 1.0.4 |
| fastapi | 0.115.2 |
| pydantic | 2.12.5 |

---

## 10. Ğ¢Ğ˜ĞŸĞĞ’Ğ† ĞŸĞĞœĞ˜Ğ›ĞšĞ˜

### âŒ "API Key missing"
**ĞŸÑ€Ğ¸Ñ‡Ğ¸Ğ½Ğ°:** ĞĞµ Ğ½Ğ°Ğ»Ğ°ÑˆÑ‚Ğ¾Ğ²Ğ°Ğ½Ñ– ĞºĞ»ÑÑ‡Ñ– Ğ² `.env`  
**Ğ Ñ–ÑˆĞµĞ½Ğ½Ñ:** ĞŸĞµÑ€ĞµĞ²Ñ–Ñ€ `LLM_PROVIDER` Ñ– Ğ²Ñ–Ğ´Ğ¿Ğ¾Ğ²Ñ–Ğ´Ğ½Ğ¸Ğ¹ ĞºĞ»ÑÑ‡

### âŒ "Timeout"
**ĞŸÑ€Ğ¸Ñ‡Ğ¸Ğ½Ğ°:** ĞŸĞ¾Ğ²Ñ–Ğ»ÑŒĞ½Ğ° Ğ¼Ğ¾Ğ´ĞµĞ»ÑŒ + Ğ¼Ğ°Ğ»Ğ¸Ğ¹ Ñ‚Ğ°Ğ¹Ğ¼Ğ°ÑƒÑ‚  
**Ğ Ñ–ÑˆĞµĞ½Ğ½Ñ:** Ğ’Ğ¸ĞºĞ¾Ñ€Ğ¸ÑÑ‚Ğ¾Ğ²ÑƒĞ¹ `timeout=120`

### âŒ "identified_product is None"
**ĞŸÑ€Ğ¸Ñ‡Ğ¸Ğ½Ğ°:** Vision Ğ½Ğµ Ğ²Ğ¿Ñ–Ğ·Ğ½Ğ°Ğ² Ñ‚Ğ¾Ğ²Ğ°Ñ€  
**Ğ Ñ–ÑˆĞµĞ½Ğ½Ñ:** ĞŸĞµÑ€ĞµĞ²Ñ–Ñ€ `products_master.yaml` Ñ‚Ğ° Ğ¿ĞµÑ€ĞµĞ³ĞµĞ½ĞµÑ€ÑƒĞ¹ Ğ°Ñ€Ñ‚ĞµÑ„Ğ°ĞºÑ‚Ğ¸

### âŒ "Supabase disabled"
**ĞŸÑ€Ğ¸Ñ‡Ğ¸Ğ½Ğ°:** ĞĞµĞ¼Ğ°Ñ” `SUPABASE_URL` Ğ°Ğ±Ğ¾ `SUPABASE_API_KEY`  
**Ğ Ñ–ÑˆĞµĞ½Ğ½Ñ:** Ğ”Ğ¾Ğ´Ğ°Ğ¹ Ğ² `.env` Ğ°Ğ±Ğ¾ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ° Ğ¿Ñ€Ğ°Ñ†ÑĞ²Ğ°Ñ‚Ğ¸Ğ¼Ğµ Ğ· fallback JSON

---

## 11. ĞšĞĞœĞĞĞ”Ğ˜

### Ğ©Ğ¾Ğ´ĞµĞ½Ğ½Ñ– ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ¸

```bash
# Ğ—Ğ°Ğ¿ÑƒÑĞº Ñ‚ĞµÑÑ‚Ñ–Ğ²
pytest tests/ -v

# Ğ—Ğ°Ğ¿ÑƒÑĞº ÑĞµÑ€Ğ²ĞµÑ€Ğ°
uvicorn src.server.main:app --reload --port 8000

# ĞŸĞµÑ€ĞµĞ³ĞµĞ½ĞµÑ€ÑƒĞ²Ğ°Ñ‚Ğ¸ vision Ğ°Ñ€Ñ‚ĞµÑ„Ğ°ĞºÑ‚Ğ¸
python data/vision/generate.py

# Ğ¤Ğ¾Ñ€Ğ¼Ğ°Ñ‚ÑƒĞ²Ğ°Ğ½Ğ½Ñ ĞºĞ¾Ğ´Ñƒ
ruff format src/
ruff check src/ --fix
```

### Docker

```bash
# Ğ—Ğ°Ğ¿ÑƒÑĞº Ğ²ÑÑŒĞ¾Ğ³Ğ¾ ÑÑ‚ĞµĞºÑƒ
docker-compose up -d

# Ğ¢Ñ–Ğ»ÑŒĞºĞ¸ Redis
docker-compose up -d redis
```

---

## âœ… Ğ§Ğ•ĞšĞ›Ğ˜Ğ¡Ğ¢ ĞŸĞ•Ğ Ğ•Ğ” ĞšĞĞœĞ†Ğ¢ĞĞœ

- [ ] `pytest tests/ -v` â€” Ğ²ÑÑ– Ñ‚ĞµÑÑ‚Ğ¸ Ğ¿Ñ€Ğ¾Ğ¹ÑˆĞ»Ğ¸
- [ ] `ruff check src/` â€” Ğ½ĞµĞ¼Ğ°Ñ” Ğ¿Ğ¾Ğ¼Ğ¸Ğ»Ğ¾Ğº Ğ»Ñ–Ğ½Ñ‚ĞµÑ€Ğ°
- [ ] `python data/vision/generate.py` â€” Ğ°Ñ€Ñ‚ĞµÑ„Ğ°ĞºÑ‚Ğ¸ Ğ°ĞºÑ‚ÑƒĞ°Ğ»ÑŒĞ½Ñ–
- [ ] `.env` Ğ½Ğµ Ğ·Ğ°ĞºĞ¾Ğ¼Ñ–Ñ‡ĞµĞ½Ğ¸Ğ¹ (Ñ” Ğ² `.gitignore`)

---

**ĞĞ²Ñ‚Ğ¾Ñ€:** MIRT AI Team  
**Ğ›Ñ–Ñ†ĞµĞ½Ğ·Ñ–Ñ:** Proprietary  
**ĞšĞ¾Ğ½Ñ‚Ğ°ĞºÑ‚:** @mirt_ua
