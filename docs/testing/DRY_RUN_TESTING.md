# Dry-Run –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –ü—Ä–æ–º–ø—Ç—ñ–≤ –ë–ï–ó API –ö–ª—é—á–∞

–¶–µ–π –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—É—î, —è–∫ —Ç–µ—Å—Ç—É–≤–∞—Ç–∏ —Å–∏—Å—Ç–µ–º—É –ø—Ä–æ–º–ø—Ç—ñ–≤ —Ç–∞ AI —à–∞—Ä–∏ **–ë–ï–ó** —Ä–µ–∞–ª—å–Ω–æ–≥–æ API –∫–ª—é—á–∞ OpenAI.

---

## üéØ –ú–µ—Ç–∞

–î–æ–∑–≤–æ–ª–∏—Ç–∏ —Ä–æ–∑—Ä–æ–±–Ω–∏–∫–∞–º:
- ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä—è—Ç–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞ –≤–∞–ª—ñ–¥–Ω—ñ—Å—Ç—å –ø—Ä–æ–º–ø—Ç—ñ–≤
- ‚úÖ –ë–∞—á–∏—Ç–∏, —è–∫—ñ –ø—Ä–æ–º–ø—Ç–∏ –≤—ñ–¥–ø—Ä–∞–≤–ª—è—é—Ç—å—Å—è –¥–æ LLM
- ‚úÖ –¢–µ—Å—Ç—É–≤–∞—Ç–∏ –ª–æ–≥—ñ–∫—É –∞–≥–µ–Ω—Ç—ñ–≤ –±–µ–∑ –≤–∏—Ç—Ä–∞—Ç –Ω–∞ API
- ‚úÖ –í–∞–ª—ñ–¥—É–≤–∞—Ç–∏ –∑–º—ñ–Ω–∏ –≤ –ø—Ä–æ–º–ø—Ç–∞—Ö –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ—î–º

---

## üöÄ –®–≤–∏–¥–∫–∏–π –°—Ç–∞—Ä—Ç

### 1. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –ø—Ä–æ–º–ø—Ç—ñ–≤

```bash
python scripts/test_prompts_dry_run.py
```

–¶–µ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç—å:
- ‚úÖ –í—Å—ñ –ø—Ä–æ–º–ø—Ç–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂—É—é—Ç—å—Å—è –±–µ–∑ –ø–æ–º–∏–ª–æ–∫
- ‚úÖ –°–∏—Å—Ç–µ–º–Ω–∏–π –ø—Ä–æ–º–ø—Ç –º–∞—î –≤—Å—ñ –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ —Å–µ–∫—Ü—ñ—ó
- ‚úÖ State –ø—Ä–æ–º–ø—Ç–∏ –º–∞—é—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—É —Å—Ç—Ä—É–∫—Ç—É—Ä—É
- ‚úÖ Snippets –¥–æ—Å—Ç—É–ø–Ω—ñ

### 2. –ü–æ–∫–∞–∑–∞—Ç–∏ –ø—Ä–æ–º–ø—Ç –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å—Ç–∞–Ω—É

```bash
python scripts/test_prompts_dry_run.py --state STATE_4_OFFER
```

–ü–æ–∫–∞–∂–µ –ø–æ–≤–Ω–∏–π –ø—Ä–æ–º–ø—Ç –¥–ª—è —Å—Ç–∞–Ω—É `STATE_4_OFFER`.

### 3. –ü–æ–∫–∞–∑–∞—Ç–∏ –ø–æ–≤–Ω–∏–π –ø—Ä–æ–º–ø—Ç, —è–∫–∏–π –±—É–¥–µ –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–∏–π –¥–æ LLM

```bash
python scripts/test_prompts_dry_run.py --show-prompt --message "–ü—Ä–∏–≤—ñ—Ç, —Ö–æ—á—É –∑–∞–º–æ–≤–∏—Ç–∏"
```

–ü–æ–∫–∞–∂–µ:
- –ë–∞–∑–æ–≤–∏–π —Å–∏—Å—Ç–µ–º–Ω–∏–π –ø—Ä–æ–º–ø—Ç
- State-specific –ø—Ä–æ–º–ø—Ç
- –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
- –Ø–∫ —Ü–µ –≤—Å–µ –æ–±'—î–¥–Ω–∞—î—Ç—å—Å—è

### 4. –¢—ñ–ª—å–∫–∏ –≤–∞–ª—ñ–¥–∞—Ü—ñ—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏

```bash
python scripts/test_prompts_dry_run.py --validate-only
```

---

## üìã –î–æ—Å—Ç—É–ø–Ω—ñ –ö–æ–º–∞–Ω–¥–∏

```bash
# –ë–∞–∑–æ–≤–∏–π —Ç–µ—Å—Ç (–≤—Å–µ)
python scripts/test_prompts_dry_run.py

# –ü–æ–∫–∞–∑–∞—Ç–∏ –ø—Ä–æ–º–ø—Ç –¥–ª—è —Å—Ç–∞–Ω—É
python scripts/test_prompts_dry_run.py --state STATE_1_DISCOVERY

# –ü–æ–∫–∞–∑–∞—Ç–∏ –ø–æ–≤–Ω–∏–π –ø—Ä–æ–º–ø—Ç –¥–ª—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
python scripts/test_prompts_dry_run.py --show-prompt --message "–•–æ—á—É –∑–∞–º–æ–≤–∏—Ç–∏"

# –ü–æ–∫–∞–∑–∞—Ç–∏ –ø—Ä–æ–º–ø—Ç –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å—Ç–∞–Ω—É —Ç–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
python scripts/test_prompts_dry_run.py --show-prompt --state STATE_4_OFFER --message "–¢–∞–∫, –ø—ñ–¥—Ö–æ–¥–∏—Ç—å"

# –¢—ñ–ª—å–∫–∏ –≤–∞–ª—ñ–¥–∞—Ü—ñ—è
python scripts/test_prompts_dry_run.py --validate-only
```

---

## üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –∑ –ú–æ–∫–∞–º–∏ (Pytest)

–î–ª—è –ø–æ–≤–Ω–æ–≥–æ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –∞–≥–µ–Ω—Ç—ñ–≤ –∑ –º–æ–∫-–≤—ñ–¥–ø–æ–≤—ñ–¥—è–º–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π —ñ—Å–Ω—É—é—á—ñ —Ç–µ—Å—Ç–∏:

```bash
# –¢–µ—Å—Ç agent node –∑ –º–æ–∫-–≤—ñ–¥–ø–æ–≤—ñ–¥–¥—é
pytest tests/test_nodes.py::test_agent_node_returns_valid_state -v

# –¢–µ—Å—Ç prompt basics (–±–µ–∑ API)
pytest tests/unit/agents/test_prompt_basics.py -v

# –í—Å—ñ —Ç–µ—Å—Ç–∏ –±–µ–∑ API –≤–∏–∫–ª–∏–∫—ñ–≤
pytest tests/unit/ -v
```

---

## üîç –©–æ –ü–µ—Ä–µ–≤—ñ—Ä—è—î—Ç—å—Å—è

### 1. –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –ü—Ä–æ–º–ø—Ç—ñ–≤
- ‚úÖ –°–∏—Å—Ç–µ–º–Ω–∏–π –ø—Ä–æ–º–ø—Ç (`system.main`)
- ‚úÖ –í—Å—ñ state –ø—Ä–æ–º–ø—Ç–∏ (`state.STATE_*`)
- ‚úÖ Snippets (—à–∞–±–ª–æ–Ω–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π)

### 2. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ü—Ä–æ–º–ø—Ç—ñ–≤
- ‚úÖ –ù–∞—è–≤–Ω—ñ—Å—Ç—å —Å–µ–∫—Ü—ñ—ó `# –†–æ–ª—å` –∞–±–æ `IDENTITY`
- ‚úÖ –ù–∞—è–≤–Ω—ñ—Å—Ç—å —Å–µ–∫—Ü—ñ–π `## DO` —Ç–∞ `## DO NOT`
- ‚úÖ –ù–∞—è–≤–Ω—ñ—Å—Ç—å —Å–µ–∫—Ü—ñ—ó `## TRANSITIONS` –¥–ª—è state –ø—Ä–æ–º–ø—Ç—ñ–≤
- ‚úÖ –í—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å placeholder —Ç–µ–∫—Å—Ç—É (`TODO`, `FIXME`, —Ç–æ—â–æ)

### 3. –í–∞–ª—ñ–¥–Ω—ñ—Å—Ç—å –ö–æ–Ω—Ç–µ–Ω—Ç—É
- ‚úÖ –ü—Ä–æ–º–ø—Ç–∏ –º—ñ—Å—Ç—è—Ç—å —É–∫—Ä–∞—ó–Ω—Å—å–∫–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç
- ‚úÖ –ü—Ä–æ–º–ø—Ç–∏ –Ω–µ –ø–æ—Ä–æ–∂–Ω—ñ (–º—ñ–Ω—ñ–º—É–º 10 —Å–∏–º–≤–æ–ª—ñ–≤)
- ‚úÖ –í—Å—ñ —Å—Ç–∞–Ω–∏ –∑ enum –º–∞—é—Ç—å –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ –ø—Ä–æ–º–ø—Ç–∏

---

## üí° –ü—Ä–∏–∫–ª–∞–¥–∏ –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

### –ü—Ä–∏–∫–ª–∞–¥ 1: –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ—î–º

```bash
# –ü–µ—Ä–µ–¥ –¥–µ–ø–ª–æ—î–º –Ω–æ–≤–∏—Ö –ø—Ä–æ–º–ø—Ç—ñ–≤
python scripts/test_prompts_dry_run.py --validate-only

# –Ø–∫—â–æ –≤—Å–µ –û–ö, –º–æ–∂–Ω–∞ –¥–µ–ø–ª–æ—ó—Ç–∏
```

### –ü—Ä–∏–∫–ª–∞–¥ 2: –î–µ–±–∞–≥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å—Ç–∞–Ω—É

```bash
# –ü–æ–¥–∏–≤–∏—Ç–∏—Å—è, —è–∫–∏–π –ø—Ä–æ–º–ø—Ç –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è OFFER
python scripts/test_prompts_dry_run.py --state STATE_4_OFFER

# –ü–æ–¥–∏–≤–∏—Ç–∏—Å—è –ø–æ–≤–Ω–∏–π –ø—Ä–æ–º–ø—Ç –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
python scripts/test_prompts_dry_run.py --show-prompt --state STATE_4_OFFER --message "–¢–∞–∫, –ø—ñ–¥—Ö–æ–¥–∏—Ç—å"
```

### –ü—Ä–∏–∫–ª–∞–¥ 3: –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–æ–≤–∏—Ö –ø—Ä–æ–º–ø—Ç—ñ–≤

```bash
# –ü—ñ—Å–ª—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–æ–≥–æ –ø—Ä–æ–º–ø—Ç—É
python scripts/test_prompts_dry_run.py

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏–π —Å—Ç–∞–Ω
python scripts/test_prompts_dry_run.py --state STATE_9_OOD
```

---

## üõ†Ô∏è –¢–µ—Ö–Ω—ñ—á–Ω—ñ –î–µ—Ç–∞–ª—ñ

### –Ø–∫ –¶–µ –ü—Ä–∞—Ü—é—î

1. **–ë–µ–∑ API –∫–ª—é—á–∞**: –°–∫—Ä–∏–ø—Ç –≤—Å—Ç–∞–Ω–æ–≤–ª—é—î `OPENAI_API_KEY=test-key-dry-run`, —â–æ –¥–æ–∑–≤–æ–ª—è—î –∑–∞–≤–∞–Ω—Ç–∞–∂—É–≤–∞—Ç–∏ –ø—Ä–æ–º–ø—Ç–∏ –±–µ–∑ —Ä–µ–∞–ª—å–Ω–∏—Ö –≤–∏–∫–ª–∏–∫—ñ–≤.

2. **–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –ø—Ä–æ–º–ø—Ç—ñ–≤**: –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î `PromptRegistry` –¥–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –≤—Å—ñ—Ö –ø—Ä–æ–º–ø—Ç—ñ–≤ –∑ —Ñ–∞–π–ª–æ–≤–æ—ó —Å–∏—Å—Ç–µ–º–∏.

3. **–í–∞–ª—ñ–¥–∞—Ü—ñ—è**: –ü–µ—Ä–µ–≤—ñ—Ä—è—î —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞ –∫–æ–Ω—Ç–µ–Ω—Ç –ø—Ä–æ–º–ø—Ç—ñ–≤ –±–µ–∑ –≤–∏–∫–ª–∏–∫—ñ–≤ –¥–æ LLM.

4. **Dry-run —Ä–µ–∂–∏–º**: –ü–æ–∫–∞–∑—É—î, —è–∫—ñ –ø—Ä–æ–º–ø—Ç–∏ –±—É–¥—É—Ç—å –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω—ñ, –∞–ª–µ –Ω–µ —Ä–æ–±–∏—Ç—å —Ä–µ–∞–ª—å–Ω–∏—Ö –≤–∏–∫–ª–∏–∫—ñ–≤.

### –û–±–º–µ–∂–µ–Ω–Ω—è

- ‚ùå –ù–µ –º–æ–∂–Ω–∞ –ø—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏ —Ä–µ–∞–ª—å–Ω—É –≤—ñ–¥–ø–æ–≤—ñ–¥—å LLM
- ‚ùå –ù–µ –º–æ–∂–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Ç–æ–∫–µ–Ω–∏/–≤–∏—Ç—Ä–∞—Ç–∏
- ‚ùå –ù–µ –º–æ–∂–Ω–∞ –ø—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—é –∑ OpenAI API

–î–ª—è —Ü—å–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π:
- `pytest tests/manual/test_connections.py` - —Ç–µ—Å—Ç–∏ –∑ —Ä–µ–∞–ª—å–Ω–∏–º API
- `pytest tests/integration/` - —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ–π–Ω—ñ —Ç–µ—Å—Ç–∏

---

## üìö –ü–æ–≤'—è–∑–∞–Ω—ñ –î–æ–∫—É–º–µ–Ω—Ç–∏

- [Testing Strategy](TESTING.md) - –∑–∞–≥–∞–ª—å–Ω–∞ —Å—Ç—Ä–∞—Ç–µ–≥—ñ—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è
- [Prompt Registry](../core/PROMPT_REGISTRY.md) - —è–∫ –ø—Ä–∞—Ü—é—î —Ä–µ—î—Å—Ç—Ä –ø—Ä–æ–º–ø—Ç—ñ–≤
- [State Machine](../core/STATE_MACHINE.md) - –æ–ø–∏—Å —Å—Ç–∞–Ω—ñ–≤

---

## ‚ùì FAQ

**Q: –ß–æ–º—É –Ω–µ –º–æ–∂–Ω–∞ –ø—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏ —Ä–µ–∞–ª—å–Ω—É –≤—ñ–¥–ø–æ–≤—ñ–¥—å LLM?**  
A: –î–ª—è —Ü—å–æ–≥–æ –ø–æ—Ç—Ä—ñ–±–µ–Ω —Ä–µ–∞–ª—å–Ω–∏–π API –∫–ª—é—á. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π `pytest tests/manual/test_connections.py` –∑ —Ä–µ–∞–ª—å–Ω–∏–º –∫–ª—é—á–µ–º.

**Q: –Ø–∫ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —â–æ –ø—Ä–æ–º–ø—Ç –ø—Ä–∞—Ü—é—î –ø—Ä–∞–≤–∏–ª—å–Ω–æ?**  
A: –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π `--show-prompt` —â–æ–± –ø–æ–±–∞—á–∏—Ç–∏ –ø–æ–≤–Ω–∏–π –ø—Ä–æ–º–ø—Ç, –ø–æ—Ç—ñ–º –ø—Ä–æ—Ç–µ—Å—Ç—É–π –∑ —Ä–µ–∞–ª—å–Ω–∏–º API –≤ manual —Ç–µ—Å—Ç–∞—Ö.

**Q: –ß–∏ –º–æ–∂–Ω–∞ –¥–æ–¥–∞—Ç–∏ –Ω–æ–≤—ñ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏?**  
A: –¢–∞–∫! –î–æ–¥–∞–π –Ω–æ–≤—ñ —Ñ—É–Ω–∫—Ü—ñ—ó –≤ `scripts/test_prompts_dry_run.py`.

---

**–û–Ω–æ–≤–ª–µ–Ω–æ:** 25 –≥—Ä—É–¥–Ω—è 2025

