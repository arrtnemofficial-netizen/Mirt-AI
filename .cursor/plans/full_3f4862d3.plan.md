---
name: Full
overview: Міграція з Supabase (API+DB) на Railway PostgreSQL як єдину БД, зі збереженням 1:1 функціоналу як на гілці test, мінімізуючи ризик через dual-write + поетапний read-cutover та чіткий rollback.
todos: []
---

# Повна міграція на Railway PostgreSQL (без Supabase)

## Ціль

- Єдина БД: **Railway PostgreSQL**.
- Жодних викликів Supabase API (`SUPABASE_URL`, `SUPABASE_API_KEY`, `get_supabase_client`) у runtime.
- Функціонал і поведінка: **1:1 як на гілці `test` (остання “свіжість”)**.

## Критерії готовності (перевіряється)

- **AC1**: `Select-String` / `grep` не знаходить `get_supabase_client`/`from supabase` у `src/` (окрім історії/коментарів/доків за потреби).
- **AC2**: сервіс стартує з тільки `DATABASE_URL` (Railway), без `SUPABASE_*` env.
- **AC3**: ключові потоки працюють: ManyChat webhook, offer→payment flow, створення/ідемпотентність order, воркери (summarization/followups/llm_usage/crm/health), observability записи.