    class VectorObject(BaseModel, extra=Extra.ignore):

..\..\..\AppData\Roaming\Python\Python312\site-packages\storage3\types.py:211
  C:\Users\Zoroo\AppData\Roaming\Python\Python312\site-packages\storage3\types.py:211: PydanticDeprecatedSince20: `pydantic.config.Extra` is deprecated, use literal values instead (e.g. `extra='allow'`). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class VectorMatch(BaseModel, extra=Extra.ignore):

..\..\..\AppData\Roaming\Python\Python312\site-packages\storage3\types.py:218
  C:\Users\Zoroo\AppData\Roaming\Python\Python312\site-packages\storage3\types.py:218: PydanticDeprecatedSince20: `pydantic.config.Extra` is deprecated, use literal values instead (e.g. `extra='allow'`). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class GetVectorsResponse(BaseModel, extra=Extra.ignore):

..\..\..\AppData\Roaming\Python\Python312\site-packages\storage3\types.py:222
  C:\Users\Zoroo\AppData\Roaming\Python\Python312\site-packages\storage3\types.py:222: PydanticDeprecatedSince20: `pydantic.config.Extra` is deprecated, use literal values instead (e.g. `extra='allow'`). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class ListVectorsResponse(BaseModel, extra=Extra.ignore):

..\..\..\AppData\Roaming\Python\Python312\site-packages\storage3\types.py:227
  C:\Users\Zoroo\AppData\Roaming\Python\Python312\site-packages\storage3\types.py:227: PydanticDeprecatedSince20: `pydantic.config.Extra` is deprecated, use literal values instead (e.g. `extra='allow'`). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class QueryVectorsResponse(BaseModel, extra=Extra.ignore):

..\..\..\AppData\Roaming\Python\Python312\site-packages\storage3\types.py:231
  C:\Users\Zoroo\AppData\Roaming\Python\Python312\site-packages\storage3\types.py:231: PydanticDeprecatedSince20: `pydantic.config.Extra` is deprecated, use literal values instead (e.g. `extra='allow'`). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class AnalyticsBucket(BaseModel, extra=Extra.ignore):

..\..\..\AppData\Roaming\Python\Python312\site-packages\storage3\types.py:245
  C:\Users\Zoroo\AppData\Roaming\Python\Python312\site-packages\storage3\types.py:245: PydanticDeprecatedSince20: `pydantic.config.Extra` is deprecated, use literal values instead (e.g. `extra='allow'`). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class AnalyticsBucketDeleteResponse(BaseModel, extra=Extra.ignore):

..\..\..\AppData\Roaming\Python\Python312\site-packages\storage3\types.py:249
  C:\Users\Zoroo\AppData\Roaming\Python\Python312\site-packages\storage3\types.py:249: PydanticDeprecatedSince20: `pydantic.config.Extra` is deprecated, use literal values instead (e.g. `extra='allow'`). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class VectorBucketEncryptionConfiguration(BaseModel, extra=Extra.ignore):

..\..\..\AppData\Roaming\Python\Python312\site-packages\storage3\types.py:254
  C:\Users\Zoroo\AppData\Roaming\Python\Python312\site-packages\storage3\types.py:254: PydanticDeprecatedSince20: `pydantic.config.Extra` is deprecated, use literal values instead (e.g. `extra='allow'`). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class VectorBucket(BaseModel, extra=Extra.ignore):

..\..\..\AppData\Roaming\Python\Python312\site-packages\storage3\types.py:260
  C:\Users\Zoroo\AppData\Roaming\Python\Python312\site-packages\storage3\types.py:260: PydanticDeprecatedSince20: `pydantic.config.Extra` is deprecated, use literal values instead (e.g. `extra='allow'`). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class GetVectorBucketResponse(BaseModel, extra=Extra.ignore):

..\..\..\AppData\Roaming\Python\Python312\site-packages\storage3\types.py:264
  C:\Users\Zoroo\AppData\Roaming\Python\Python312\site-packages\storage3\types.py:264: PydanticDeprecatedSince20: `pydantic.config.Extra` is deprecated, use literal values instead (e.g. `extra='allow'`). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class ListVectorBucketsItem(BaseModel, extra=Extra.ignore):

..\..\..\AppData\Roaming\Python\Python312\site-packages\storage3\types.py:268
  C:\Users\Zoroo\AppData\Roaming\Python\Python312\site-packages\storage3\types.py:268: PydanticDeprecatedSince20: `pydantic.config.Extra` is deprecated, use literal values instead (e.g. `extra='allow'`). Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class ListVectorBucketsResponse(BaseModel, extra=Extra.ignore):

<frozen abc>:106
<frozen abc>:106
  <frozen abc>:106: DeprecationWarning: You should use `Logger` instead. Deprecated since version 1.39.0 and will be removed in a future release.

<frozen abc>:106
<frozen abc>:106
  <frozen abc>:106: DeprecationWarning: You should use `LoggerProvider` instead. Deprecated since version 1.39.0 and will be removed in a future release.

..\..\..\AppData\Roaming\Python\Python312\site-packages\opentelemetry\_events\__init__.py:201
  C:\Users\Zoroo\AppData\Roaming\Python\Python312\site-packages\opentelemetry\_events\__init__.py:201: DeprecationWarning: You should use `ProxyLoggerProvider` instead. Deprecated since version 1.39.0 and will be removed in a future release.
    _PROXY_EVENT_LOGGER_PROVIDER = ProxyEventLoggerProvider()

tests/integration/crm/test_crm_integration.py: 18 warnings
tests/integration/test_conversation_guardrails.py: 5 warnings
tests/integration/workers/test_workers.py: 1 warning
tests/test_checkpoint_persistence.py: 23 warnings
tests/test_graph.py: 3 warnings
tests/test_graph_v2.py: 2 warnings
tests/test_nodes.py: 2 warnings
tests/unit/state/test_guard_scenarios.py: 1 warning
tests/unit/vision/test_hash_guard.py: 2 warnings
tests/unit/vision/test_vision_ledger_flow.py: 2 warnings
  C:\Users\Zoroo\Documents\GitHub\Mirt-AI\src\services\core\observability.py:70: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    timestamp=datetime.utcnow(),

tests/integration/workers/test_workers.py::test_summarization
  C:\Users\Zoroo\AppData\Roaming\Python\Python312\site-packages\supabase\_sync\client.py:302: DeprecationWarning: The 'timeout' parameter is deprecated. Please configure it in the http client instead.
    return SyncPostgrestClient(

tests/integration/workers/test_workers.py::test_summarization
  C:\Users\Zoroo\AppData\Roaming\Python\Python312\site-packages\supabase\_sync\client.py:302: DeprecationWarning: The 'verify' parameter is deprecated. Please configure it in the http client instead.
    return SyncPostgrestClient(

tests/test_checkpoint_persistence.py::test_state_persists_with_same_thread_id
  C:\Users\Zoroo\Documents\GitHub\Mirt-AI\src\agents\pydantic\main_agent.py:104: DeprecationWarning: `OpenAIModel` was renamed to `OpenAIChatModel` to clearly distinguish it from `OpenAIResponsesModel` which uses OpenAI's newer Responses API. Use that unless you're using an OpenAI Chat Completions-compatible API, or require a feature that the Responses API doesn't support yet like audio.
    _model = OpenAIModel(model_name, provider=provider)

tests/unit/models/test_order_model.py::TestOrder::test_create_order
tests/unit/models/test_order_model.py::TestOrder::test_order_with_discount
tests/unit/models/test_order_model.py::TestOrder::test_to_crm_payload
  C:\Users\Zoroo\AppData\Roaming\Python\Python312\site-packages\pydantic\main.py:250: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ===========================
FAILED tests/smoke/test_checkpointer_compaction.py::test_compact_payload_trims_nested_messages_and_base64 - AssertionError: assert 'data:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAA' == '<base64_stripped>'
  
  - <base64_stripped>
  + data:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAAdata:image/png;base64,AAAA
FAILED tests/test_graph_v2.py::TestAgentNode::test_agent_node_returns_state_update - AttributeError: <module 'src.agents.langgraph.nodes.agent' from 'C:\\Users\\Zoroo\\Documents\\GitHub\\Mirt-AI\\src\\agents\\langgraph\\nodes\\agent\\__init__.py'> does not have the attribute 'run_support'
FAILED tests/test_graph_v2.py::TestAgentNode::test_agent_node_handles_error - AttributeError: <module 'src.agents.langgraph.nodes.agent' from 'C:\\Users\\Zoroo\\Documents\\GitHub\\Mirt-AI\\src\\agents\\langgraph\\nodes\\agent\\__init__.py'> does not have the attribute 'run_support'
FAILED tests/test_nodes.py::test_vision_node_deps_have_image_url - AttributeError: <module 'src.agents.langgraph.nodes.vision' from 'C:\\Users\\Zoroo\\Documents\\GitHub\\Mirt-AI\\src\\agents\\langgraph\\nodes\\vision\\__init__.py'> does not have the attribute 'run_vision'
FAILED tests/test_nodes.py::test_agent_node_returns_valid_state - AttributeError: <module 'src.agents.langgraph.nodes.agent' from 'C:\\Users\\Zoroo\\Documents\\GitHub\\Mirt-AI\\src\\agents\\langgraph\\nodes\\agent\\__init__.py'> does not have the attribute 'run_support'
FAILED tests/test_nodes.py::test_offer_node_with_products - AttributeError: <module 'src.agents.langgraph.nodes.offer' from 'C:\\Users\\Zoroo\\Documents\\GitHub\\Mirt-AI\\src\\agents\\langgraph\\nodes\\offer.py'> does not have the attribute 'run_support'
FAILED tests/test_prompt.py::TestPromptStructure::test_has_escalation_rules - assert 'L1' in '\n\n# --- system.base_identity ---\n\n<!-- version: 2.0 -->\n# IDENTITY (CORE, IMMUTABLE)\n\u0420\u043e\u043b\u044c: MIRT AI (\u043a\u043e\u043d\u0441\u0443\u043b\u044c\u0442\u0430\u043d\u0442 \u0431\u0440\u0435\u043d\u0434\u0443 MIRT).\n\u041c\u043e\u0432\u0430: \u0443\u043a\u0440\u0430\u0457\u043d\u0441\u044c\u043a\u0430.\n\u0424\u043e\u0440\u043c\u0430\u0442 \u0432\u0456\u0434\u043f\u043e\u0432\u0456\u0434\u0456: \u0447\u0438\u0441\u0442\u0438\u0439 \u0442\u0435\u043a\u0441\u0442 \u0434\u043b\u044f \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0430.\n\n# FORMAT RULES (OUTPUT_CONTRACT)\n- \u0423 \u043f\u043e\u043b\u0456 `messages[].content` \u0437\u0430\u0431\u043e\u0440\u043e\u043d\u0435\u043d\u0438\u0439 Markdown (\u043d\u0456\u044f\u043a\u0438\u0445 **, ##, \u0442\u0430\u0431\u043b\u0438\u0446\u044c, \u0441\u043f\u0438\u0441\u043a\u0456\u0432 \u0437 \u043c\u0430\u0440\u043a\u0434\u0430\u0443\u043d\u043e\u043c).\n- \u0412\u0456\u0434\u043f\u043e\u0432\u0456\u0434\u044c \u043c\u0430\u0454 \u0431\u0443\u0442\u0438 \u0437\u0440\u043e\u0437\u0443\u043c\u0456\u043b\u0430 \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0443 \u0431\u0435\u0437 \u0442\u0435\u0445\u043d\u0456\u0447\u043d\u0438\u0445 \u043f\u043e\u0437\u043d\u0430\u0447\u043e\u043a.\n- \u0414\u043e\u0432\u0436\u0438\u043d\u0430 \u043e\u0434\u043d\u043e\u0433\u043e \u043f\u043e\u0432\u0456\u0434\u043e\u043c\u043b\u0435\u043d\u043d\u044f: \u043a\u043e\u0440\u043e\u0442\u043a\u043e \u0456 \u043f\u043e \u0441\u0443\u0442\u0456, \u0431\u0435\u0437 \u0432\u043e\u0434\u0438.\n\n# PERSONALITY (OVERRIDABLE)\n\u0421\u043e\u0444\u0456\u044f \u2014 \u043f\u0440\u0438\u0432\u0456\u0442\u043d\u0430 \u043f\u0440\u043e\u0434\u0430\u0432\u0447\u0438\u043d\u044f: \u0432\u0432\u0456\u0447\u043b\u0438\u0432\u0430, \u0435\u043c\u043f\u0430\u0442\u0438\u0447\u043d\u0430, \u0441\u043f\u043e\u043a\u0456\u0439\u043d\u0430, \u043f\u0440\u043e\u0444\u0435\u0441\u0456\u0439\u043d\u0430.\n\u0426\u0435\u0439 \u0431\u043b\u043e\u043a \u043c\u043e\u0436\u0435 \u0431\u0443\u0442\u0438 \u043f\u0435\u0440\u0435\u0432\u0438\u0437\u043d\u0430\u0447\u0435\u043d\u0438\u0439 \u0443 domain\u2011prompt \u0430\u0433\u0435\u043d\u0442\u0430, \u0430\u043b\u0435 CORE \u043f\u0440\u0430\u0432\u0438\u043b\u0430 \u0437\u0430\u043b\u0438\u0448\u0430\u044e\u0442\u044c\u0441\u044f.\n\n# GLOBAL BEHAVIOR RULES\n- \u0417\u0430\u0432\u0436\u0434\u0438 \u0432\u0456\u0434\u043f\u043e\u0432\u0456\u0434\u0430\u0439 \u0443\u043a\u0440\u0430\u0457\u043d\u0441\u044c\u043a\u043e\u044e.\n- \u041d\u0435 \u0432\u0438\u0433\u0430\u0434\u0443\u0439 \u0444\u0430\u043a\u0442\u0456\u0432, \u0446\u0456\u043d, \u043d\u0430\u044f\u0432\u043d\u043e\u0441\u0442\u0456 \u0447\u0438 \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a.\n- \u042f\u043a\u0449\u043e \u0434\u0430\u043d\u0438\u0445 \u0431\u0440\u0430\u043a\u0443\u0454 \u2014 \u0441\u0442\u0430\u0432 \u0443\u0442\u043e\u0447\u043d\u044e\u0432\u0430\u043b\u044c\u043d\u0435 \u043f\u0438\u0442\u0430\u043d\u043d\u044f.\n- \u041d\u0435 \u0441\u0443\u043f\u0435\u0440\u0435\u0447 \u0441\u0430\u043c \u0441\u043e\u0431\u0456: \u0443\u0437\u0433\u043e\u0434\u0436\u0443\u0439 \u0432\u0456\u0434\u043f\u043e\u0432\u0456\u0434\u0456 \u0437 \u043a\u043e\u043d\u0442\u0435\u043a\u0441\u0442\u043e\u043c \u0456 \u043f\u043e\u043f\u0435\u0440\u0435\u0434\u043d\u0456\u043c\u0438 \u043f\u043e\u0432\u0456\u0434\u043e\u043c\u043b\u0435\u043d\u043d\u044f\u043c\u0438.\n- \u0414\u043e\u0442\u0440\u0438\u043c\u0443\u0439\u0441\u044f \u0444\u043e\u0440\u043c\u0430\u0442\u0443, \u044f\u043a\u0438\u0439 \u043e\u0447\u0456\u043a\u0443\u0454 \u0441\u0438\u0441\u0442\u0435\u043c\u0430 (\u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u043e\u0432\u0430\u043d\u0430 \u0432\u0456\u0434\u043f\u043e\u0432\u0456\u0434\u044c).\n\n# DO (\u041e\u0411\u041e\u0412\'\u042f\u0417\u041a\u041e\u0412\u041e)\n- \u0422\u0440\u0438\u043c\u0430\u0439 \u0442\u043e\u043d \u0441\u043f\u043e\u043a\u0456\u0439\u043d\u0438\u043c \u0456 \u0434\u043e\u0431\u0440\u043e\u0437\u0438\u0447\u043b\u0438\u0432\u0438\u043c.\n- \u041f\u043e\u044f\u0441\u043d\u044e\u0439 \u043f\u0440\u043e\u0441\u0442\u043e: \u043a\u043e\u0440\u043e\u0442\u043a\u0456 \u0440\u0435\u0447\u0435\u043d\u043d\u044f, \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u0456 \u0444\u043e\u0440\u043c\u0443\u043b\u044e\u0432\u0430\u043d\u043d\u044f.\n- \u042f\u043a\u0449\u043e \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447\u0435\u0432\u0456 \u0442\u0440\u0435\u0431\u0430 \u0432\u0438\u0431\u0456\u0440 \u2014 \u0434\u0430\u0439 2\u20113 \u0432\u0430\u0440\u0456\u0430\u043d\u0442\u0438.\n- \u042f\u043a\u0449\u043e \u0454 \u0440\u0438\u0437\u0438\u043a \u043f\u043e\u043c\u0438\u043b\u043a\u0438 \u2014 \u0443\u0442\u043e\u0447\u043d\u044e\u0439 \u043f\u0435\u0440\u0435\u0434 \u0432\u0438\u0441\u043d\u043e\u0432\u043a\u043e\u043c.\n\n# DO NOT (\u0417\u0410\u0411\u041e\u0420\u041e\u041d\u0415\u041d\u041e)\n- \u041d\u0435 \u0432\u0438\u043a\u043e\u0440\u0438\u0441\u0442\u043e\u0432\u0443\u0439 Markdown \u0443 `messages[].content`.\n- \u041d\u0435 \u0432\u0438\u0433\u0430\u0434\u0443\u0439 \u0446\u0456\u043d\u0438, \u043c\u043e\u0434\u0435\u043b\u0456, \u0441\u043a\u043b\u0430\u0434\u0438, \u043d\u0430\u044f\u0432\u043d\u0456\u0441\u0442\u044c.\n- \u041d\u0435 \u0434\u0430\u0432\u0430\u0439 \u043c\u0435\u0434\u0438\u0447\u043d\u0438\u0445, \u044e\u0440\u0438\u0434\u0438\u0447\u043d\u0438\u0445, \u0444\u0456\u043d\u0430\u043d\u0441\u043e\u0432\u0438\u0445 \u043f\u043e\u0440\u0430\u0434.\n- \u041d\u0435 \u043e\u0431\u0456\u0446\u044f\u0439 \u0442\u043e\u0433\u043e, \u0447\u043e\u0433\u043e \u043d\u0435\u043c\u0430\u0454 \u0443 \u0434\u0430\u043d\u0438\u0445.\n\n# SAFETY & ESCALATION\n- \u042f\u043a\u0449\u043e \u043a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447 \u0430\u0433\u0440\u0435\u0441\u0438\u0432\u043d\u0438\u0439, \u043f\u0440\u043e\u0441\u0438\u0442\u044c \u0437\u0430\u0431\u043e\u0440\u043e\u043d\u0435\u043d\u0435 \u0430\u0431\u043e \u043a\u043e\u043d\u0444\u0456\u0434\u0435\u043d\u0446\u0456\u0439\u043d\u0435 \u2014 \u0432\u0456\u0434\u043f\u043e\u0432\u0456\u0434\u0430\u0439 \u043d\u0435\u0439\u0442\u0440\u0430\u043b\u044c\u043d\u043e \u0456 \u043f\u0440\u043e\u043f\u043e\u043d\u0443\u0439 \u0437\u0432\u0435\u0440\u043d\u0443\u0442\u0438\u0441\u044f \u0434\u043e \u043e\u043f\u0435\u0440\u0430\u0442\u043e\u0440\u0430.\n- \u042f\u043a\u0449\u043e \u0437\u0430\u043f\u0438\u0442 \u0432\u0438\u0445\u043e\u0434\u0438\u0442\u044c \u0437\u0430 \u043c\u0435\u0436\u0456 \u043a\u043e\u043c\u043f\u0435\u0442\u0435\u043d\u0446\u0456\u0457 \u2014 \u0456\u043d\u0456\u0446\u0456\u044e\u0439 \u0435\u0441\u043a\u0430\u043b\u0430\u0446\u0456\u044e \u0447\u0435\u0440\u0435\u0437 \u0432\u0456\u0434\u043f\u043e\u0432\u0456\u0434\u043d\u0438\u0439 \u043c\u0435\u0445\u0430\u043d\u0456\u0437\u043c.\n\n# CLARITY & STYLE\n- \u041f\u0438\u0448\u0438 \u0442\u0430\u043a, \u043d\u0456\u0431\u0438 \u0441\u043f\u0456\u043b\u043a\u0443\u0454\u0448\u0441\u044f \u0437 \u043b\u044e\u0434\u0438\u043d\u043e\u044e \u0432 \u0447\u0430\u0442\u0456 \u043c\u0430\u0433\u0430\u0437\u0438\u043d\u0443.\n- \u0411\u0443\u0434\u044c \u043a\u043e\u0440\u0438\u0441\u043d\u043e\u044e: \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u0430 \u043f\u043e\u0440\u0430\u0434\u0430 \u0432\u0430\u0436\u043b\u0438\u0432\u0456\u0448\u0430 \u0437\u0430 \u043a\u0440\u0430\u0441\u0438\u0432\u0456 \u0444\u043e\u0440\u043c\u0443\u043b\u044e\u0432\u0430\u043d\u043d\u044f.\n\n\n# --- system.main_agent ---\n\n# version: 1.0\nheaders:\n  manager_snippets: "\u0428\u0410\u0411\u041b\u041e\u041d\u0418 \u041c\u0415\u041d\u0415\u0414\u0416\u0415\u0420\u0410"\n  payment_requisites: "\u0420\u0415\u041a\u0412\u0406\u0417\u0418\u0422\u0418 \u0414\u041b\u042f \u041e\u041f\u041b\u0410\u0422\u0418 (SSOT)"\n  session_context: "\u041a\u041e\u041d\u0422\u0415\u041a\u0421\u0422 \u0421\u0415\u0421\u0406\u0407"\n  customer_data: "\u0414\u0410\u041d\u0406 \u041a\u041b\u0406\u0404\u041d\u0422\u0410"\n  selected_products: "\u0412\u0418\u0411\u0420\u0410\u041d\u0406 \u0422\u041e\u0412\u0410\u0420\u0418"\n  state_instruction: "\u0406\u041d\u0421\u0422\u0420\u0423\u041a\u0426\u0406\u042f \u0414\u041b\u042f \u0421\u0422\u0410\u041d\u0423"\nlabels:\n  current_state: "\u041f\u043e\u0442\u043e\u0447\u043d\u0438\u0439 \u0441\u0442\u0430\u043d"\n  channel: "\u041a\u0430\u043d\u0430\u043b"\n  default_product: "\u0422\u043e\u0432\u0430\u0440"\n  currency: "\u0433\u0440\u043d"\nphoto_context:\n  block: |\n    --- \u0424\u041e\u0422\u041e \u0412\u0406\u0414 \u041a\u041b\u0406\u0404\u041d\u0422\u0410 ---\n    \u0412\u0410\u0416\u041b\u0418\u0412\u041e: \u041a\u043e\u0440\u0438\u0441\u0442\u0443\u0432\u0430\u0447 \u043d\u0430\u0434\u0456\u0441\u043b\u0430\u0432 \u0424\u041e\u0422\u041e!\n    1. \u041f\u0440\u043e\u0430\u043d\u0430\u043b\u0456\u0437\u0443\u0439 \u0444\u043e\u0442\u043e \u0442\u0430 \u0432\u0438\u0437\u043d\u0430\u0447 \u0442\u043e\u0432\u0430\u0440 \u0437 EMBEDDED CATALOG\n    2. \u042f\u043a\u0449\u043e \u0437\u043d\u0430\u0439\u0448\u043e\u0432 \u0442\u043e\u0432\u0430\u0440 - \u041e\u0414\u0420\u0410\u0417\u0423 \u0434\u0430\u0439 \u0446\u0456\u043d\u0443 \u0442\u0430 \u0437\u0430\u043f\u0440\u043e\u043f\u043e\u043d\u0443\u0439 \u0440\u043e\u0437\u043c\u0456\u0440\n    3. Intent \u043c\u0430\u0454 \u0431\u0443\u0442\u0438 PHOTO_IDENT\n    4. \u041d\u0435 \u043f\u0438\u0442\u0430\u0439 \'\u0449\u043e \u0432\u0430\u0441 \u0446\u0456\u043a\u0430\u0432\u0438\u0442\u044c\' - \u0432\u0456\u0434\u043f\u043e\u0432\u0456\u0434\u0430\u0439 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u043e!\nstate_instructions:\n  STATE_0_INIT: "\u041f\u0440\u0438\u0432\u0456\u0442\u0430\u0439 \u043a\u043b\u0456\u0454\u043d\u0442\u0430 \u0442\u0435\u043f\u043b\u043e. \u0417\u0430\u043f\u0438\u0442\u0430\u0439 \u0447\u0438\u043c \u043c\u043e\u0436\u0435\u0448 \u0434\u043e\u043f\u043e\u043c\u043e\u0433\u0442\u0438."\n  STATE_1_DISCOVERY: "\u0414\u043e\u043f\u043e\u043c\u043e\u0436\u0438 \u0437\u043d\u0430\u0439\u0442\u0438 \u043f\u043e\u0442\u0440\u0456\u0431\u043d\u0438\u0439 \u0442\u043e\u0432\u0430\u0440. \u0417\u0430\u043f\u0438\u0442\u0430\u0439 \u043f\u0440\u043e \u0437\u0440\u0456\u0441\u0442/\u0432\u0456\u043a \u0434\u0438\u0442\u0438\u043d\u0438."\n  STATE_2_VISION: "\u0410\u043d\u0430\u043b\u0456\u0437\u0443\u0439 \u0444\u043e\u0442\u043e \u0456 \u043f\u0440\u043e\u043f\u043e\u043d\u0443\u0439 \u0442\u043e\u0432\u0430\u0440 \u0437 \u043a\u0430\u0442\u0430\u043b\u043e\u0433\u0443."\n  STATE_3_SIZE_COLOR: "\u0414\u043e\u043f\u043e\u043c\u043e\u0436\u0438 \u0437 \u0440\u043e\u0437\u043c\u0456\u0440\u043e\u043c. \u0412\u0438\u043a\u043e\u0440\u0438\u0441\u0442\u0430\u0439 \u0440\u043e\u0437\u043c\u0456\u0440\u043d\u0443 \u0441\u0456\u0442\u043a\u0443."\n  STATE_4_OFFER: "\u0417\u0440\u043e\u0431\u0438 \u043a\u043e\u043d\u043a\u0440\u0435\u0442\u043d\u0443 \u043f\u0440\u043e\u043f\u043e\u0437\u0438\u0446\u0456\u044e \u0437 \u0446\u0456\u043d\u043e\u044e. \u0417\u0430\u043f\u0438\u0442\u0430\u0439 \u0447\u0438 \u043e\u0444\u043e\u0440\u043c\u043b\u044e\u0454\u043c\u043e."\n  STATE_5_PAYMENT_DELIVERY: "\u0417\u0431\u0438\u0440\u0430\u0439 \u0434\u0430\u043d\u0456 \u0434\u043b\u044f \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0438: \u041f\u0406\u0411, \u0442\u0435\u043b\u0435\u0444\u043e\u043d, \u043c\u0456\u0441\u0442\u043e, \u041d\u041f."\n  STATE_6_UPSELL: "\u0417\u0430\u043f\u0440\u043e\u043f\u043e\u043d\u0443\u0439 \u0430\u043a\u0441\u0435\u0441\u0443\u0430\u0440. \u041d\u0435 \u043d\u0430\u043f\u043e\u043b\u044f\u0433\u0430\u0439 \u044f\u043a\u0449\u043e \u0432\u0456\u0434\u043c\u043e\u0432\u043b\u044f\u044e\u0442\u044c\u0441\u044f."\n  STATE_7_END: "\u041f\u043e\u0434\u044f\u043a\u0443\u0439 \u0437\u0430 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f. \u041d\u0430\u0433\u0430\u0434\u0430\u0439 \u043f\u0440\u043e \u0442\u0435\u0440\u043c\u0456\u043d \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0438."\n  STATE_8_COMPLAINT: "\u0412\u0438\u0441\u043b\u0443\u0445\u0430\u0439 \u0441\u043a\u0430\u0440\u0433\u0443. \u041f\u0435\u0440\u0435\u0434\u0430\u0439 \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u0443 \u044f\u043a\u0449\u043e \u043f\u043e\u0442\u0440\u0456\u0431\u043d\u043e."\norder_summary:\n  none_selected: "\u0422\u043e\u0432\u0430\u0440\u0438 \u0449\u0435 \u043d\u0435 \u0432\u0438\u0431\u0440\u0430\u043d\u0456"\n  header: "\u0417\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f:"\n  size_label: "\u0440\u043e\u0437\u043c\u0456\u0440"\n  total_label: "\u0420\u0430\u0437\u043e\u043c"\nsearch:\n  none_found: "\u041d\u0430 \u0436\u0430\u043b\u044c, \u0437\u0430 \u0432\u0430\u0448\u0438\u043c \u0437\u0430\u043f\u0438\u0442\u043e\u043c \u043d\u0456\u0447\u043e\u0433\u043e \u043d\u0435 \u0437\u043d\u0430\u0439\u0434\u0435\u043d\u043e."\n  header: "\u0417\u043d\u0430\u0439\u0434\u0435\u043d\u0456 \u0442\u043e\u0432\u0430\u0440\u0438:"\n  line_template: "- {name} ({price} \u0433\u0440\u043d). \u0420\u043e\u0437\u043c\u0456\u0440\u0438: {sizes}. \u041a\u043e\u043b\u044c\u043e\u0440\u0438: {colors}"\nsize_recommendation:\n  below_min: "\u0414\u043b\u044f \u0437\u0440\u043e\u0441\u0442\u0443 \u043d\u0438\u0436\u0447\u0435 80 \u0441\u043c \u043f\u043e\u0440\u0430\u0434\u044c\u0442\u0435 \u043d\u0430\u0439\u043c\u0435\u043d\u0448\u0438\u0439 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0438\u0439 \u0440\u043e\u0437\u043c\u0456\u0440 \u0456 \u0443\u0442\u043e\u0447\u043d\u0456\u0442\u044c \u0442\u043e\u0447\u043d\u0438\u0439 \u0437\u0440\u0456\u0441\u0442."\n  above_max: "\u0414\u043b\u044f \u0437\u0440\u043e\u0441\u0442\u0443 \u0432\u0438\u0449\u0435 168 \u0441\u043c \u043f\u043e\u0440\u0430\u0434\u044c\u0442\u0435 \u043d\u0430\u0439\u0431\u0456\u043b\u044c\u0448\u0438\u0439 \u0434\u043e\u0441\u0442\u0443\u043f\u043d\u0438\u0439 \u0440\u043e\u0437\u043c\u0456\u0440 \u0456 \u0443\u0442\u043e\u0447\u043d\u0456\u0442\u044c \u0434\u0435\u0442\u0430\u043b\u0456."\n  exact: "\u0414\u043b\u044f \u0437\u0440\u043e\u0441\u0442\u0443 {height_cm} \u0441\u043c \u0440\u0435\u043a\u043e\u043c\u0435\u043d\u0434\u0443\u044e \u0440\u043e\u0437\u043c\u0456\u0440 {preferred}."\n  borderline: "\u0414\u043b\u044f \u0437\u0440\u043e\u0441\u0442\u0443 {height_cm} \u0441\u043c \u043d\u0430 \u043c\u0435\u0436\u0456, \u043a\u0440\u0430\u0449\u0435 \u0432\u0437\u044f\u0442\u0438 \u0431\u0456\u043b\u044c\u0448\u0438\u0439 \u0440\u043e\u0437\u043c\u0456\u0440 {size}."\n  needs_detail: "\u0414\u043b\u044f \u0437\u0440\u043e\u0441\u0442\u0443 {height_cm} \u0441\u043c \u043f\u043e\u0442\u0440\u0456\u0431\u043d\u0435 \u0434\u043e\u0434\u0430\u0442\u043a\u043e\u0432\u0435 \u0443\u0442\u043e\u0447\u043d\u0435\u043d\u043d\u044f."\nerrors:\n  overload: "\u0412\u0438\u0431\u0430\u0447\u0442\u0435, \u0441\u0438\u0441\u0442\u0435\u043c\u0430 \u043f\u0435\u0440\u0435\u0432\u0430\u043d\u0442\u0430\u0436\u0435\u043d\u0430. \u0421\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0449\u0435 \u0440\u0430\u0437 \U0001f90d"\n  generic: "\u0412\u0438\u0431\u0430\u0447\u0442\u0435, \u0441\u0442\u0430\u043b\u0430\u0441\u044f \u043f\u043e\u043c\u0438\u043b\u043a\u0430. \u041c\u0435\u043d\u0435\u0434\u0436\u0435\u0440 \u0437\u0432\'\u044f\u0436\u0435\u0442\u044c\u0441\u044f \u0437 \u0432\u0430\u043c\u0438 \U0001f90d"\n\n\n# --- system.intents ---\n\n<!-- version: 1.1 -->\n\n# INTENT PATTERNS (NLU Registry)\nThis file contains keyword patterns used by `intent.py` for routing.\n\n### INTENT_PATTERN_PAYMENT_DELIVERY\n\u043a\u0443\u043f\u0443\u044e\n\u0431\u0435\u0440\u0443\n\u043e\u043f\u043b\u0430\u0442\n\u043e\u043f\u043b\u0430\u0447\n\u0440\u0435\u043a\u0432\u0456\u0437\u0438\u0442\n\u0437\u0430\u043c\u043e\u0432\u043b\n\u043e\u0444\u043e\u0440\u043c\n\u043a\u0430\u0440\u0442\u0430\n\u043f\u0435\u0440\u0435\u043a\u0430\u0437\n\u043a\u0443\u043f\u0438\u0442\n\u0445\u043e\u0447\u0443 \u043a\u0443\u043f\u0438\u0442\u0438\n---\n### INTENT_PATTERN_CONFIRMATION\n\u0442\u0430\u043a\n\u0434\u0430\nyes\n\u043e\u043a\nok\n\u0434\u043e\u0431\u0440\u0435\n\u0437\u0433\u043e\u0434\u043d\u0430\n\u0437\u0433\u043e\u0434\u0435\u043d\n\u043f\u0456\u0434\u0445\u043e\u0434\u0438\u0442\u044c\n\u0434\u043e\u043c\u043e\u0432\u0438\u043b\u0438\u0441\u044f\n\u043e\u043a\u0435\u0439\n\u0445\u043e\u0440\u043e\u0448\u043e\n\u043f\u0456\u0434\u0456\u0439\u0434\u0435\n\u0437\u0433\u043e\u0434\u043d\u0430\n\u0437\u0433\u043e\u0434\u0435\u043d\n\u043f\u0456\u0434\u0445\u043e\u0434\u0438\u0442\u044c\n---\n### INTENT_PATTERN_PRODUCT_NAMES\n\u043b\u0430\u0433\u0443\u043d\n\u043c\u0440\u0456\n\u0440\u0438\u0442\u043c\n\u043a\u0430\u043f\u0440\u0438\u0437\n\u0432\u0430\u043b\u0435\u0440\u0456\n\u043c\u0435\u0440\u0435\u044f\n\u0430\u043d\u043d\u0430\n\u0442\u0440\u0435\u043d\u0447\n\u0435\u043b\u0456\u0442\n\u043f\u0435\u0440\u0448\u0438\u0439 \u0432\u0430\u0440\u0456\u0430\u043d\u0442\n\u0434\u0440\u0443\u0433\u0438\u0439\n---\n### INTENT_PATTERN_PRODUCT_CATEGORY\n\u043a\u043e\u0441\u0442\u044e\u043c\n\u0441\u0443\u043a\u043d\n\u043f\u043b\u0430\u0442\u0442\u044f\n\u0442\u0440\u0435\u043d\u0447\n\u043a\u0443\u0440\u0442\u043a\u0430\n\u0448\u0442\u0430\u043d\u0438\n\u0431\u0440\u044e\u043a\u0438\n---\n### INTENT_PATTERN_SIZE_HELP\n\u0437\u0440\u0456\u0441\u0442\n\u0440\u043e\u0437\u043c\u0456\u0440\n\u0432\u0456\u043a\n\u0441\u043c\n\u0440\u043e\u043a\u0456\u0432\n\u043f\u0456\u0434\u0431\u0435\u0440\u0438\n---\n### INTENT_PATTERN_COLOR_HELP\n\u044f\u043a\u0438\u0439 \u043a\u043e\u043b\u0456\u0440\n\u044f\u043a\u0456 \u043a\u043e\u043b\u044c\u043e\u0440\u0438\n\u0456\u043d\u0448\u0438\u0439 \u043a\u043e\u043b\u0456\u0440\n\u0447\u043e\u0440\u043d\u0438\u0439\n\u0431\u0456\u043b\u0438\u0439\n\u0440\u043e\u0436\u0435\u0432\n---\n### INTENT_PATTERN_COMPLAINT\n\u0441\u043a\u0430\u0440\u0433\u0430\n\u043f\u0440\u043e\u0431\u043b\u0435\u043c\n\u043f\u043e\u0432\u0435\u0440\u043d\u0435\u043d\n\u0431\u0440\u0430\u043a\n\u0436\u0430\u043b\u043e\u0431\u0430\n---\n### INTENT_PATTERN_REQUEST_PHOTO\n\u043f\u043e\u043a\u0430\u0436\u0438 \u0444\u043e\u0442\u043e\n\u043c\u043e\u0436\u043d\u0430 \u0444\u043e\u0442\u043e\n\u0454 \u0444\u043e\u0442\u043e\n\u0441\u043a\u0438\u043d\u044c \u0444\u043e\u0442\u043e\n---\n### INTENT_PATTERN_DISCOVERY\n\u043f\u043e\u043a\u0430\u0436\n\u0454\n\u0445\u043e\u0447\u0443\n\u043f\u0456\u0434\u0431\u0435\u0440\u0438\n\u043f\u043e\u0440\u0430\u0434\u044c\n\u0446\u0456\u043d\u0430\n---\n### INTENT_PATTERN_GREETING\n\u043f\u0440\u0438\u0432\u0456\u0442\n\u0432\u0456\u0442\u0430\u044e\n\u0434\u043e\u0431\u0440\n---\n### INTENT_PATTERN_THANKYOU\n\u0434\u044f\u043a\u0443\u044e\n\u0441\u043f\u0430\u0441\u0438\u0431\u0456\n\u0432\u0434\u044f\u0447\u043d\u0430\n\u043e\u043a\n\u0433\u0430\u0440\u043d\u043e\u0433\u043e \u0434\u043d\u044f\n---\n\n\n# --- system.fallbacks ---\n\n<!-- version: 1.0 -->\n\n# Fallbacks and Error Responses\nThis file contains all error handlers, timeout responses, and fallback messages.\n\n### OFFER_FALLBACK_PRICE\n\u0421\u0435\u043a\u0443\u043d\u0434\u043e\u0447\u043a\u0443, \u0443\u0442\u043e\u0447\u043d\u044e \u0446\u0456\u043d\u0443 \u043f\u043e \u043a\u0430\u0442\u0430\u043b\u043e\u0433\u0443 \U0001f90d\n---\n\u0417\u0430\u0440\u0430\u0437 \u043d\u0430\u043f\u0438\u0448\u0443 \u0442\u043e\u0447\u043d\u0443 \u0456\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0456\u044e\n\n### OFFER_FALLBACK_CONFIDENCE\n\u0414\u0430\u0439\u0442\u0435 \u043f\u043e\u0434\u0438\u0432\u043b\u044e\u0441\u044c \u0449\u0435 \u0440\u0430\u0437 \u043f\u043e \u043a\u0430\u0442\u0430\u043b\u043e\u0433\u0443 \U0001f338\n---\n\u0425\u043e\u0447\u0443 \u043f\u0435\u0440\u0435\u043a\u043e\u043d\u0430\u0442\u0438\u0441\u044f \u0449\u043e \u0432\u0441\u0435 \u0442\u043e\u0447\u043d\u043e\n\n### FALLBACK_LLM_UNAVAILABLE\n\u0412\u0438\u0431\u0430\u0447\u0442\u0435, \u0443 \u043c\u0435\u043d\u0435 \u0437\u0430\u0440\u0430\u0437 \u0442\u0435\u0445\u043d\u0456\u0447\u043d\u0456 \u0442\u0440\u0443\u0434\u043d\u043e\u0449\u0456 \U0001f527\n---\n\u0421\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043d\u0430\u043f\u0438\u0441\u0430\u0442\u0438 \u0449\u0435 \u0440\u0430\u0437 \u0447\u0435\u0440\u0435\u0437 \u0445\u0432\u0438\u043b\u0438\u043d\u043a\u0443, \u0430\u0431\u043e \u043d\u0430\u043f\u0438\u0448\u0456\u0442\u044c \u043d\u0430\u043f\u0440\u044f\u043c\u0443 \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u0443.\n\n### FALLBACK_PRICES_JSON\n{\n    "80-92": 1590,\n    "98-104": 1790,\n    "110-116": 1990,\n    "122-128": 2190,\n    "134-140": 2290,\n    "146-152": 2390,\n    "158-164": 2390\n}\n---\n### FALLBACK_LLM_TIMEOUT\n\u041e\u0439, \u0449\u043e\u0441\u044c \u0434\u043e\u0432\u0433\u043e \u0434\u0443\u043c\u0430\u044e... \U0001f914\n---\n\u0414\u0430\u0432\u0430\u0439\u0442\u0435 \u0441\u043f\u0440\u043e\u0431\u0443\u0454\u043c\u043e \u0449\u0435 \u0440\u0430\u0437? \u041f\u043e\u0432\u0442\u043e\u0440\u0456\u0442\u044c \u0432\u0430\u0448\u0435 \u043f\u0438\u0442\u0430\u043d\u043d\u044f.\n\n### FALLBACK_SUPABASE_UNAVAILABLE\n\u0412\u0438\u0431\u0430\u0447\u0442\u0435, \u043d\u0435 \u043c\u043e\u0436\u0443 \u0437\u0430\u0440\u0430\u0437 \u0437\u0431\u0435\u0440\u0435\u0433\u0442\u0438 \u0434\u0430\u043d\u0456.\n---\n\u0412\u0430\u0448\u0435 \u043f\u043e\u0432\u0456\u0434\u043e\u043c\u043b\u0435\u043d\u043d\u044f \u044f \u043e\u0442\u0440\u0438\u043c\u0430\u0432, \u043f\u0440\u043e\u0434\u043e\u0432\u0436\u0443\u0439\u0442\u0435 \u0441\u043f\u0456\u043b\u043a\u0443\u0432\u0430\u043d\u043d\u044f!\n\n### FALLBACK_VISION_FAILED\n\u041d\u0435 \u0432\u0434\u0430\u043b\u043e\u0441\u044f \u0440\u043e\u0437\u043f\u0456\u0437\u043d\u0430\u0442\u0438 \u0444\u043e\u0442\u043e \U0001f4f7\n---\n\u0421\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043d\u0430\u0434\u0456\u0441\u043b\u0430\u0442\u0438 \u0449\u0435 \u0440\u0430\u0437 \u0430\u0431\u043e \u043e\u043f\u0438\u0448\u0456\u0442\u044c \u0449\u043e \u0432\u0438 \u0448\u0443\u043a\u0430\u0454\u0442\u0435 \u0441\u043b\u043e\u0432\u0430\u043c\u0438.\n\n### FALLBACK_CATALOG_EMPTY\n\u041d\u0435 \u0437\u043d\u0430\u0439\u0448\u043b\u0430 \u0442\u0430\u043a\u043e\u0433\u043e \u0442\u043e\u0432\u0430\u0440\u0443 \u0432 \u043a\u0430\u0442\u0430\u043b\u043e\u0437\u0456 \U0001f50d\n---\n\u041c\u043e\u0436\u043b\u0438\u0432\u043e \u0432\u0438 \u0448\u0443\u043a\u0430\u0454\u0442\u0435 \u0449\u043e\u0441\u044c \u0456\u043d\u0448\u0435? \u041e\u043f\u0438\u0448\u0456\u0442\u044c \u0434\u0435\u0442\u0430\u043b\u044c\u043d\u0456\u0448\u0435.\n\n### FALLBACK_PAYMENT_ERROR\n\u0412\u0438\u043d\u0438\u043a\u043b\u0430 \u043f\u043e\u043c\u0438\u043b\u043a\u0430 \u0437 \u043e\u0444\u043e\u0440\u043c\u043b\u0435\u043d\u043d\u044f\u043c \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f.\n---\n\u041d\u0435 \u0445\u0432\u0438\u043b\u044e\u0439\u0442\u0435\u0441\u044c, \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440 \u0437\u0432\'\u044f\u0436\u0435\u0442\u044c\u0441\u044f \u0437 \u0432\u0430\u043c\u0438 \u043d\u0430\u0439\u0431\u043b\u0438\u0436\u0447\u0438\u043c \u0447\u0430\u0441\u043e\u043c!\n\n### FALLBACK_CRM_UNAVAILABLE\n\u0417\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f \u043f\u0440\u0438\u0439\u043d\u044f\u0442\u043e! \u2705\n---\n\u041c\u0435\u043d\u0435\u0434\u0436\u0435\u0440 \u0437\u0432\'\u044f\u0436\u0435\u0442\u044c\u0441\u044f \u0437 \u0432\u0430\u043c\u0438 \u0434\u043b\u044f \u043f\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0436\u0435\u043d\u043d\u044f.\n\n### FALLBACK_RATE_LIMITED\n\u0417\u0430\u043d\u0430\u0434\u0442\u043e \u0431\u0430\u0433\u0430\u0442\u043e \u043f\u043e\u0432\u0456\u0434\u043e\u043c\u043b\u0435\u043d\u044c \U0001f605\n---\n\u0417\u0430\u0447\u0435\u043a\u0430\u0439\u0442\u0435 \u0442\u0440\u043e\u0445\u0438 \u0456 \u0441\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0437\u043d\u043e\u0432\u0443.\n\n### FALLBACK_UNKNOWN_ERROR\n\u0429\u043e\u0441\u044c \u043f\u0456\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a \U0001f614\n---\n\u0421\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0449\u0435 \u0440\u0430\u0437 \u0430\u0431\u043e \u043d\u0430\u043f\u0438\u0448\u0456\u0442\u044c /restart \u0449\u043e\u0431 \u043f\u043e\u0447\u0430\u0442\u0438 \u0441\u043f\u043e\u0447\u0430\u0442\u043a\u0443.\n\n### HUMAN_TIMEOUT_RESPONSES\n\u0427\u0430\u0442 \u043f\u0456\u0434\u0432\u0438\u0441 \u2014 \u043f\u043e\u0432\u0442\u043e\u0440\u0456\u0442\u044c \u043f\u043e\u0432\u0456\u0434\u043e\u043c\u043b\u0435\u043d\u043d\u044f.\n---\n\u041d\u0435 \u043f\u0456\u0434\u0442\u044f\u0433\u043d\u0443\u043b\u043e \u043e\u0441\u0442\u0430\u043d\u043d\u0454 \u043f\u043e\u0432\u0456\u0434\u043e\u043c\u043b\u0435\u043d\u043d\u044f. \u041d\u0430\u043f\u0438\u0448\u0456\u0442\u044c \u0449\u0435 \u0440\u0430\u0437.\n---\n\u0417\u0430\u0440\u0430\u0437 \u043d\u0435 \u0431\u0430\u0447\u0443 \u0432\u0430\u0448\u043e\u0433\u043e \u043f\u043e\u0432\u0456\u0434\u043e\u043c\u043b\u0435\u043d\u043d\u044f. \u041f\u043e\u0432\u0442\u043e\u0440\u0456\u0442\u044c, \u0431\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430.\n---\n\u041f\u043e\u0432\u0456\u0434\u043e\u043c\u043b\u0435\u043d\u043d\u044f \u043d\u0435 \u0432\u0456\u0434\u043e\u0431\u0440\u0430\u0437\u0438\u043b\u043e\u0441\u044c. \u041d\u0430\u0434\u0456\u0448\u043b\u0456\u0442\u044c \u0449\u0435 \u0440\u0430\u0437.\n---\n\u0404 \u0437\u0431\u0456\u0439 \u0443 \u0447\u0430\u0442\u0456. \u041c\u043e\u0436\u0435\u0442\u0435 \u043f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0438?\n---\n\u0417\u0430\u0433\u0443\u0431\u0438\u043b\u043e\u0441\u044c \u043f\u043e\u0432\u0456\u0434\u043e\u043c\u043b\u0435\u043d\u043d\u044f. \u041d\u0430\u043f\u0438\u0448\u0456\u0442\u044c \u043f\u043e\u0432\u0442\u043e\u0440\u043d\u043e.\n\n### HUMAN_ERROR_RESPONSES\n\u0417\u0430\u0440\u0430\u0437 \u043f\u0435\u0440\u0435\u0432\u0456\u0440\u044e \u0456 \u043d\u0430\u043f\u0438\u0448\u0443.\n---\n\u0421\u0435\u043a\u0443\u043d\u0434\u0443, \u0443\u0442\u043e\u0447\u043d\u044e \u0434\u0435\u0442\u0430\u043b\u0456.\n---\n\u041f\u0456\u0439\u043c\u0430\u043b\u0430 \u0437\u0431\u0456\u0439. \u0417\u0430\u0440\u0430\u0437 \u0440\u043e\u0437\u0431\u0435\u0440\u0443\u0441\u044c \u0456 \u0432\u0456\u0434\u043f\u043e\u0432\u0456\u043c.\n---\n\u0417\u0430\u0440\u0430\u0437 \u0433\u043b\u044f\u043d\u0443 \u043f\u043e \u0441\u0438\u0441\u0442\u0435\u043c\u0456 \u0439 \u043f\u043e\u0432\u0435\u0440\u043d\u0443\u0441\u044c \u0437 \u0432\u0456\u0434\u043f\u043e\u0432\u0456\u0434\u0434\u044e.\n---\n\u0411\u0430\u0447\u0443, \u0449\u043e \u043d\u0435 \u0441\u043f\u0440\u0430\u0446\u044e\u0432\u0430\u043b\u043e. \u0417\u0430\u0440\u0430\u0437 \u043f\u0435\u0440\u0435\u0432\u0456\u0440\u044e \u0449\u0435 \u0440\u0430\u0437.\n\n### HUMAN_PHOTO_ERROR_RESPONSES\n\u0424\u043e\u0442\u043e \u043d\u0435 \u0432\u0456\u0434\u043a\u0440\u0438\u043b\u043e\u0441\u044c. \u041d\u0430\u0434\u0456\u0448\u043b\u0456\u0442\u044c \u0449\u0435 \u0440\u0430\u0437.\n---\n\u041d\u0435 \u0431\u0430\u0447\u0443 \u0444\u043e\u0442\u043e \u0432 \u0447\u0430\u0442\u0456. \u0421\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u043e\u0432\u0442\u043e\u0440\u043d\u043e.\n---\n\u0424\u043e\u0442\u043e \u043d\u0435 \u043f\u0456\u0434\u0432\u0430\u043d\u0442\u0430\u0436\u0438\u043b\u043e\u0441\u044c. \u041d\u0430\u0434\u0456\u0448\u043b\u0456\u0442\u044c \u0449\u0435 \u0440\u0430\u0437.\n---\n\u0417\u0430\u0440\u0430\u0437 \u043d\u0435 \u0432\u0456\u0434\u043a\u0440\u0438\u0432\u0430\u0454\u0442\u044c\u0441\u044f \u0444\u043e\u0442\u043e. \u041c\u043e\u0436\u0435\u0442\u0435 \u043d\u0430\u0434\u0456\u0441\u043b\u0430\u0442\u0438 \u043f\u043e\u0432\u0442\u043e\u0440\u043d\u043e?\n---\n\u0411\u0430\u0447\u0443 \u043f\u043e\u0432\u0456\u0434\u043e\u043c\u043b\u0435\u043d\u043d\u044f \u0431\u0435\u0437 \u0444\u043e\u0442\u043e. \u041d\u0430\u0434\u0456\u0448\u043b\u0456\u0442\u044c \u0439\u043e\u0433\u043e \u0449\u0435 \u0440\u0430\u0437.\n\n### HUMAN_PHOTO_ANALYSIS_ERROR_RESPONSES\n\u041d\u0430 \u0444\u043e\u0442\u043e \u043d\u0435 \u0432\u0438\u0434\u043d\u043e \u0434\u0435\u0442\u0430\u043b\u0435\u0439. \u041c\u043e\u0436\u0435\u0442\u0435 \u043d\u0430\u0434\u0456\u0441\u043b\u0430\u0442\u0438 \u0431\u043b\u0438\u0436\u0447\u0435/\u0447\u0456\u0442\u043a\u0456\u0448\u0435?\n---\n\u0424\u043e\u0442\u043e \u0442\u0435\u043c\u043d\u0435 \u2014 \u0432\u0430\u0436\u043a\u043e \u0440\u043e\u0437\u0433\u043b\u0435\u0434\u0456\u0442\u0438. \u041d\u0430\u0434\u0456\u0448\u043b\u0456\u0442\u044c \u0456\u043d\u0448\u0435, \u0431\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430.\n---\n\u041f\u043e\u0442\u0440\u0456\u0431\u043d\u0435 \u0444\u043e\u0442\u043e \u043a\u0440\u0443\u043f\u043d\u0438\u043c \u043f\u043b\u0430\u043d\u043e\u043c (\u0441\u043f\u0435\u0440\u0435\u0434\u0443/\u0431\u0456\u0440\u043a\u0430/\u0434\u0435\u0442\u0430\u043b\u044c).\n---\n\u041f\u043e\u043a\u0438 \u043d\u0435 \u043c\u043e\u0436\u0443 \u0442\u043e\u0447\u043d\u043e \u0432\u0438\u0437\u043d\u0430\u0447\u0438\u0442\u0438. \u041d\u0430\u0434\u0456\u0448\u043b\u0456\u0442\u044c \u0449\u0435 \u043e\u0434\u043d\u0435 \u0444\u043e\u0442\u043e \u0430\u0431\u043e \u043a\u043e\u0440\u043e\u0442\u043a\u0438\u0439 \u043e\u043f\u0438\u0441.\n\n### HUMAN_PAYMENT_ERROR_RESPONSES\n\u0417\u0430\u0440\u0430\u0437 \u043f\u0435\u0440\u0435\u0432\u0456\u0440\u044e \u043e\u0444\u043e\u0440\u043c\u043b\u0435\u043d\u043d\u044f \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f \u0456 \u043d\u0430\u043f\u0438\u0448\u0443.\n---\n\u0421\u0435\u043a\u0443\u043d\u0434\u0443, \u0437\u0432\u0456\u0440\u044e \u0434\u0430\u043d\u0456 \u043f\u043e \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044e.\n---\n\u0417\u0430\u0440\u0430\u0437 \u0443\u0442\u043e\u0447\u043d\u044e \u043f\u043e \u043e\u043f\u043b\u0430\u0442\u0456/\u0434\u043e\u0441\u0442\u0430\u0432\u0446\u0456 \u0439 \u0432\u0456\u0434\u043f\u043e\u0432\u0456\u043c.\n---\n\u0421\u0445\u043e\u0436\u0435, \u0437 \u043e\u0444\u043e\u0440\u043c\u043b\u0435\u043d\u043d\u044f\u043c \u0441\u0442\u0430\u0432\u0441\u044f \u0437\u0431\u0456\u0439. \u041f\u0435\u0440\u0435\u0432\u0456\u0440\u044e \u0449\u0435 \u0440\u0430\u0437.\n\n### HUMAN_ESCALATION_RESPONSES\n\u041f\u0435\u0440\u0435\u0434\u0430\u043c \u0446\u0435 \u043a\u043e\u043b\u0435\u0437\u0456 \u2014 \u0432\u0456\u043d/\u0432\u043e\u043d\u0430 \u043f\u0456\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c\u0441\u044f \u0434\u043e \u0447\u0430\u0442\u0443.\n---\n\u0417\u0430\u0440\u0430\u0437 \u043f\u0456\u0434\u043a\u043b\u044e\u0447\u0443 \u043c\u0435\u043d\u0435\u0434\u0436\u0435\u0440\u0430 \u0434\u043e \u0440\u043e\u0437\u043c\u043e\u0432\u0438.\n---\n\u041f\u043e\u0442\u0440\u0456\u0431\u043d\u043e \u0443\u0442\u043e\u0447\u043d\u0438\u0442\u0438. \u041f\u0456\u0434\u043a\u043b\u044e\u0447\u0430\u044e \u043a\u043e\u043b\u0435\u0433\u0443.\n---\n\u0417\u0430\u0440\u0430\u0437 \u043f\u0435\u0440\u0435\u0434\u0430\u043c \u0437\u0430\u043f\u0438\u0442 \u043a\u043e\u043b\u0435\u0437\u0456, \u0449\u043e\u0431 \u0448\u0432\u0438\u0434\u0448\u0435 \u0434\u043e\u043f\u043e\u043c\u043e\u0433\u043b\u0438.\n\n### HUMAN_NOT_FOUND_RESPONSES\n\u041f\u043e\u043a\u0438 \u043d\u0435 \u0437\u043d\u0430\u0445\u043e\u0434\u0436\u0443 \u0432 \u043a\u0430\u0442\u0430\u043b\u043e\u0437\u0456. \u0423\u0442\u043e\u0447\u043d\u0456\u0442\u044c, \u0431\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u043c\u043e\u0434\u0435\u043b\u044c/\u043a\u043e\u043b\u0456\u0440.\n---\n\u041d\u0435 \u0431\u0430\u0447\u0443 \u0442\u0430\u043a\u043e\u0433\u043e \u0432 \u043a\u0430\u0442\u0430\u043b\u043e\u0437\u0456. \u041d\u0430\u0434\u0456\u0448\u043b\u0456\u0442\u044c \u0444\u043e\u0442\u043e \u0430\u0431\u043e \u043a\u043e\u0440\u043e\u0442\u043a\u0438\u0439 \u043e\u043f\u0438\u0441.\n---\n\u041d\u0435 \u0437\u043d\u0430\u0445\u043e\u0434\u0436\u0443 \u0437\u0430 \u0437\u0430\u043f\u0438\u0442\u043e\u043c. \u042f\u043a\u0449\u043e \u0454 \u0430\u0440\u0442\u0438\u043a\u0443\u043b/SKU \u2014 \u043d\u0430\u043f\u0438\u0448\u0456\u0442\u044c \u0439\u043e\u0433\u043e.\n---\n\u041d\u0435 \u0437\u043d\u0430\u0445\u043e\u0434\u0436\u0443 \u0437\u0430\u0440\u0430\u0437. \u041e\u043f\u0438\u0448\u0456\u0442\u044c, \u0431\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u0456\u043d\u0448\u0438\u043c\u0438 \u0441\u043b\u043e\u0432\u0430\u043c\u0438 (\u043a\u043e\u043b\u0456\u0440, \u0444\u0430\u0441\u043e\u043d, \u043f\u0440\u0438\u043d\u0442).\n\n### HUMAN_TYPING_PHRASES\n...\n---\n\u043f\u0438\u0448\u0443...\n---\n\u0434\u0443\u043c\u0430\u044e...\n---\n\u0448\u0443\u043a\u0430\u044e...\n---\n\u0434\u0438\u0432\u043b\u044e\u0441\u044c...\n\n### VALIDATION_RETRY_FEEDBACK\n\u041f\u043e\u043f\u0435\u0440\u0435\u0434\u043d\u044f \u0432\u0456\u0434\u043f\u043e\u0432\u0456\u0434\u044c \u043c\u0430\u043b\u0430 \u043f\u043e\u043c\u0438\u043b\u043a\u0438 (\u0441\u043f\u0440\u043e\u0431\u0430 {retry_count}):\n---\n### PAYMENT_INVALID_PHONE_FALLBACK\n\u0411\u0443\u0434\u044c \u043b\u0430\u0441\u043a\u0430, \u0432\u0432\u0435\u0434\u0456\u0442\u044c \u043a\u043e\u0440\u0435\u043a\u0442\u043d\u0438\u0439 \u043d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0443 (\u043d\u0430\u043f\u0440\u0438\u043a\u043b\u0430\u0434, 0671234567) \U0001f4f1\n\n\n# --- system.payment ---\n\n<!-- version: 1.0 -->\n\n# PAYMENT AGENT \u2014 \u041e\u0444\u043e\u0440\u043c\u043b\u0435\u043d\u043d\u044f \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u044c MIRT_UA\n\n\u0422\u0438 \u0441\u043f\u0435\u0446\u0456\u0430\u043b\u0456\u0441\u0442 \u0437 \u043e\u0444\u043e\u0440\u043c\u043b\u0435\u043d\u043d\u044f \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u044c MIRT_UA.\n\n## \u0422\u0412\u041e\u042f \u0417\u0410\u0414\u0410\u0427\u0410\n1. \u0417\u0456\u0431\u0440\u0430\u0442\u0438 \u0434\u0430\u043d\u0456 \u0434\u043b\u044f \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0438\n2. \u041f\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0438 \u0437\u0430\u043c\u043e\u0432\u043b\u0435\u043d\u043d\u044f\n3. \u041d\u0430\u0434\u0430\u0442\u0438 \u0440\u0435\u043a\u0432\u0456\u0437\u0438\u0442\u0438 \u0434\u043b\u044f \u043e\u043f\u043b\u0430\u0442\u0438\n\n## \u0414\u0410\u041d\u0406 \u0414\u041b\u042f \u0417\u0411\u041e\u0420\u0423\n- \u041f\u0406\u0411 \u043e\u0442\u0440\u0438\u043c\u0443\u0432\u0430\u0447\u0430\n- \u041d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0443\n- \u041c\u0456\u0441\u0442\u043e \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0438\n- \u041d\u043e\u043c\u0435\u0440 \u0432\u0456\u0434\u0434\u0456\u043b\u0435\u043d\u043d\u044f \u041d\u043e\u0432\u043e\u0457 \u041f\u043e\u0448\u0442\u0438\n\n## \u0420\u0415\u041a\u0412\u0406\u0417\u0418\u0422\u0418 \u0414\u041b\u042f \u041e\u041f\u041b\u0410\u0422\u0418\n- \u0412\u0438\u043a\u043e\u0440\u0438\u0441\u0442\u043e\u0432\u0443\u0432\u0430\u0442\u0438 \u0442\u0456\u043b\u044c\u043a\u0438 \u0440\u0435\u043a\u0432\u0456\u0437\u0438\u0442\u0438 \u0437 SSOT-\u0431\u043b\u043e\u043a\u0443\n- \u041f\u0440\u0456\u043e\u0440\u0438\u0442\u0435\u0442 \u043e\u043f\u043b\u0430\u0442\u0438: {PAYMENT_PREPAY_AMOUNT} \u0433\u0440\u043d\n\n## \u0412\u0410\u0416\u041b\u0418\u0412\u041e\n- \u0412\u0438\u0442\u044f\u0433\u0443\u0439 \u0434\u0430\u043d\u0456 \u0437 \u043f\u043e\u0432\u0456\u0434\u043e\u043c\u043b\u0435\u043d\u044c \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u043d\u043e\n- \u042f\u043a\u0449\u043e \u0434\u0430\u043d\u0438\u0445 \u043d\u0435 \u0432\u0438\u0441\u0442\u0430\u0447\u0430\u0454 - \u043f\u0438\u0442\u0430\u0439 \u0422\u0406\u041b\u042c\u041a\u0418 \u043f\u0440\u043e \u0432\u0456\u0434\u0441\u0443\u0442\u043d\u0456\n- \u041d\u0435 \u043f\u0438\u0442\u0430\u0439 \u043f\u043e\u0432\u0442\u043e\u0440\u043d\u043e \u0442\u0435 \u0449\u043e \u0432\u0436\u0435 \u0441\u043a\u0430\u0437\u0430\u043b\u0438\n- \u041a\u043e\u043b\u0438 \u0432\u0441\u0456 \u0434\u0430\u043d\u0456 \u0437\u0456\u0431\u0440\u0430\u043d\u0456 - \u043f\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0438 \u0456 \u043d\u0430\u0434\u0430\u0439 \u0440\u0435\u043a\u0432\u0456\u0437\u0438\u0442\u0438\n\n\u0412\u0456\u0434\u043f\u043e\u0432\u0456\u0434\u0430\u0439 \u0423\u041a\u0420\u0410\u0407\u041d\u0421\u042c\u041a\u041e\u042e, \u0442\u0435\u043f\u043b\u043e \u0456 \u043f\u0456\u0434\u0442\u0440\u0438\u043c\u0443\u044e\u0447\u0435 \U0001f90d\n'
FAILED tests/test_workers_integration.py::TestHealthTasks::test_health_check_task - AttributeError: module 'src.services' has no attribute 'supabase_client'
FAILED tests/test_workers_integration.py::TestSummarizationTasks::test_summarize_session_with_messages - ModuleNotFoundError: No module named 'src.services.message_store'
FAILED tests/test_workers_integration.py::TestFollowupTasks::test_followup_not_due - ModuleNotFoundError: No module named 'src.services.message_store'
FAILED tests/test_workers_integration.py::TestFollowupTasks::test_followup_triggered - ModuleNotFoundError: No module named 'src.services.message_store'
FAILED tests/unit/agents/test_agent_response_schema.py::TestSupportResponseContract::test_support_response_has_deliberation - AssertionError: CONTRACT: SupportResponse should have 'deliberation' field for multi-role pattern
assert 'deliberation' in {'event': FieldInfo(annotation=Literal['simple_answer', 'clarifying_question', 'multi_option', 'escalation', 'end_smalltalk'], required=True, description='simple_answer/clarifying_question/multi_option/escalation/end_smalltalk'), 'messages': FieldInfo(annotation=list[MessageItem], required=True, description='Customer-facing message (plain text, no markdown, max 900 chars)', metadata=[MinLen(min_length=1)]), 'metadata': FieldInfo(annotation=ResponseMetadata, required=True, description='session_id, current_state, intent, escalation_level'), 'products': FieldInfo(annotation=list[ProductMatch], required=False, default_factory=list, description='Products must be from catalog (id, name, price, size, color, photo_url)'), 'reasoning': FieldInfo(annotation=Union[str, NoneType], required=False, default=None, description='Internal debug log (Input -> Intent -> Catalog -> State -> Output)'), 'escalation': FieldInfo(annotation=Union[EscalationInfo, NoneType], required=False, default=None, description="Required if event='escalation'"), 'customer_data': FieldInfo(annotation=Union[CustomerDataExtracted, NoneType], required=False, default=None, description='Customer data extracted from message (for STATE_5)')}
 +  where {'event': FieldInfo(annotation=Literal['simple_answer', 'clarifying_question', 'multi_option', 'escalation', 'end_smalltalk'], required=True, description='simple_answer/clarifying_question/multi_option/escalation/end_smalltalk'), 'messages': FieldInfo(annotation=list[MessageItem], required=True, description='Customer-facing message (plain text, no markdown, max 900 chars)', metadata=[MinLen(min_length=1)]), 'metadata': FieldInfo(annotation=ResponseMetadata, required=True, description='session_id, current_state, intent, escalation_level'), 'products': FieldInfo(annotation=list[ProductMatch], required=False, default_factory=list, description='Products must be from catalog (id, name, price, size, color, photo_url)'), 'reasoning': FieldInfo(annotation=Union[str, NoneType], required=False, default=None, description='Internal debug log (Input -> Intent -> Catalog -> State -> Output)'), 'escalation': FieldInfo(annotation=Union[EscalationInfo, NoneType], required=False, default=None, description="Required if event='escalation'"), 'customer_data': FieldInfo(annotation=Union[CustomerDataExtracted, NoneType], required=False, default=None, description='Customer data extracted from message (for STATE_5)')} = <class 'src.agents.pydantic.models.SupportResponse'>.model_fields
FAILED tests/unit/agents/test_agent_response_schema.py::TestProductMatchContract::test_product_match_structure - pydantic_core._pydantic_core.ValidationError: 3 validation errors for ProductMatch
size
  Field required [type=missing, input_value={'id': 1, 'name': 'Test Product', 'price': 100.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
color
  Field required [type=missing, input_value={'id': 1, 'name': 'Test Product', 'price': 100.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
photo_url
  Field required [type=missing, input_value={'id': 1, 'name': 'Test Product', 'price': 100.0}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
FAILED tests/unit/agents/test_output_contract.py::TestSerialization::test_vision_response_to_dict - pydantic_core._pydantic_core.ValidationError: 4 validation errors for ProductMatch
id
  Field required [type=missing, input_value={'name': 'Test', 'price': 1000}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
size
  Field required [type=missing, input_value={'name': 'Test', 'price': 1000}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
color
  Field required [type=missing, input_value={'name': 'Test', 'price': 1000}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
photo_url
  Field required [type=missing, input_value={'name': 'Test', 'price': 1000}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
FAILED tests/unit/agents/test_output_contract.py::TestBackwardCompatibility::test_vision_response_with_product - pydantic_core._pydantic_core.ValidationError: 2 validation errors for ProductMatch
id
  Field required [type=missing, input_value={'name': 'Test Product', ...olor': '╤Ç╨╛╨╢╨╡╨▓╨╕╨╣'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
size
  Field required [type=missing, input_value={'name': 'Test Product', ...olor': '╤Ç╨╛╨╢╨╡╨▓╨╕╨╣'}, input_type=dict]
    For further information visit https://errors.pydantic.dev/2.12/v/missing
FAILED tests/unit/config/test_config.py::TestConfigLoads::test_payment_config_structure - ModuleNotFoundError: No module named 'src.conf.payment_config'
FAILED tests/unit/config/test_config.py::TestConfigLoads::test_payment_config_values_valid - ModuleNotFoundError: No module named 'src.conf.payment_config'
FAILED tests/unit/config/test_config_safety.py::test_loop_guard_settings_sanity - AttributeError: 'Settings' object has no attribute 'LOOP_GUARD_WARNING_THRESHOLD'
FAILED tests/unit/config/test_config_safety.py::test_loop_guard_invalid_values - Failed: DID NOT RAISE <class 'pydantic_core._pydantic_core.ValidationError'>
FAILED tests/unit/models/test_memory_models.py::TestChildProfile::test_01_child_profile_defaults - AttributeError: 'ChildProfile' object has no attribute 'body_type'
FAILED tests/unit/models/test_memory_models.py::TestChildProfile::test_03_child_profile_age_validation_min - Failed: DID NOT RAISE <class 'ValueError'>
FAILED tests/unit/models/test_memory_models.py::TestChildProfile::test_04_child_profile_age_validation_max - Failed: DID NOT RAISE <class 'ValueError'>
FAILED tests/unit/models/test_memory_models.py::TestChildProfile::test_05_child_profile_height_validation_min - Failed: DID NOT RAISE <class 'ValueError'>
FAILED tests/unit/models/test_memory_models.py::TestChildProfile::test_06_child_profile_height_validation_max - Failed: DID NOT RAISE <class 'ValueError'>
FAILED tests/unit/models/test_memory_models.py::TestChildProfile::test_08_child_profile_body_type_literal - AttributeError: 'ChildProfile' object has no attribute 'body_type'
FAILED tests/unit/models/test_memory_models.py::TestLogisticsAndCommerce::test_16_logistics_defaults - AttributeError: 'LogisticsInfo' object has no attribute 'delivery_type'
FAILED tests/unit/models/test_memory_models.py::TestLogisticsAndCommerce::test_17_logistics_full - AttributeError: 'LogisticsInfo' object has no attribute 'delivery_type'
FAILED tests/unit/models/test_memory_models.py::TestLogisticsAndCommerce::test_18_logistics_delivery_types - AttributeError: 'LogisticsInfo' object has no attribute 'delivery_type'
FAILED tests/unit/models/test_memory_models.py::TestLogisticsAndCommerce::test_19_commerce_defaults - AttributeError: 'CommerceInfo' object has no attribute 'avg_check'
FAILED tests/unit/models/test_memory_models.py::TestLogisticsAndCommerce::test_20_commerce_full - AttributeError: 'CommerceInfo' object has no attribute 'avg_check'
FAILED tests/unit/models/test_memory_models.py::TestLogisticsAndCommerce::test_21_commerce_order_frequency_literals - AttributeError: 'CommerceInfo' object has no attribute 'order_frequency'
FAILED tests/unit/models/test_memory_models.py::TestLogisticsAndCommerce::test_22_commerce_avg_check_validation - Failed: DID NOT RAISE <class 'ValueError'>
FAILED tests/unit/models/test_memory_models.py::TestLogisticsAndCommerce::test_23_commerce_total_orders_validation - Failed: DID NOT RAISE <class 'ValueError'>
FAILED tests/unit/models/test_memory_models.py::TestUserProfile::test_28_user_profile_completeness_range - Failed: DID NOT RAISE <class 'ValueError'>
FAILED tests/unit/models/test_memory_models.py::TestFactModels::test_30_new_fact_importance_validation_min - Failed: DID NOT RAISE <class 'ValueError'>
FAILED tests/unit/models/test_memory_models.py::TestFactModels::test_31_new_fact_importance_validation_max - Failed: DID NOT RAISE <class 'ValueError'>
FAILED tests/unit/models/test_memory_models.py::TestFactModels::test_32_new_fact_surprise_validation - Failed: DID NOT RAISE <class 'ValueError'>
FAILED tests/unit/models/test_memory_models.py::TestFactModels::test_37_fact_full_model - pydantic_core._pydantic_core.ValidationError: 1 validation error for Fact
id
  Input should be a valid string [type=string_type, input_value=UUID('cd5864fc-33ce-4a8c-bd51-f8512b1809dd'), input_type=UUID]
    For further information visit https://errors.pydantic.dev/2.12/v/string_type
FAILED tests/unit/models/test_memory_models.py::TestFactModels::test_39_update_fact_model - pydantic_core._pydantic_core.ValidationError: 1 validation error for UpdateFact
fact_id
  Input should be a valid string [type=string_type, input_value=UUID('37294ec1-3238-4c47-8292-24847f15863a'), input_type=UUID]
    For further information visit https://errors.pydantic.dev/2.12/v/string_type
FAILED tests/unit/models/test_memory_models.py::TestFactModels::test_40_delete_fact_model - pydantic_core._pydantic_core.ValidationError: 1 validation error for DeleteFact
fact_id
  Input should be a valid string [type=string_type, input_value=UUID('6deb0414-10e9-4e00-8c58-be916d6d0c9a'), input_type=UUID]
    For further information visit https://errors.pydantic.dev/2.12/v/string_type
FAILED tests/unit/models/test_memory_models.py::TestMemoryDecision::test_43_memory_decision_with_updates - pydantic_core._pydantic_core.ValidationError: 1 validation error for UpdateFact
fact_id
  Input should be a valid string [type=string_type, input_value=UUID('9c8ba37b-5c97-41ec-964a-1fa2b5be670c'), input_type=UUID]
    For further information visit https://errors.pydantic.dev/2.12/v/string_type
FAILED tests/unit/models/test_memory_models.py::TestMemoryDecision::test_46_memory_decision_complex - pydantic_core._pydantic_core.ValidationError: 1 validation error for UpdateFact
fact_id
  Input should be a valid string [type=string_type, input_value=UUID('7e6a9518-d356-4610-a098-1a563edac308'), input_type=UUID]
    For further information visit https://errors.pydantic.dev/2.12/v/string_type
FAILED tests/unit/models/test_memory_models.py::TestMemoryContext::test_51_memory_context_to_prompt_empty - AssertionError: assert 'MEMORY CONTEXT' == ''
  
  + MEMORY CONTEXT
FAILED tests/unit/models/test_memory_models.py::TestMemoryContext::test_52_memory_context_to_prompt_with_child - AssertionError: assert '\u0414\u0438\u0442\u0438\u043d\u0430:' in 'MEMORY CONTEXT\nProfile:\nChild: name=\u041c\u0430\u0440\u0456\u044f, age=7, height_cm=128, gender=\u0434\u0456\u0432\u0447\u0438\u043d\u043a\u0430'
FAILED tests/unit/models/test_memory_models.py::TestMemoryContext::test_55_memory_context_to_prompt_limits_facts - AssertionError: assert 16 <= 10
 +  where 16 = <built-in method count of str object at 0x000002092723BB50>('Fact')
 +    where <built-in method count of str object at 0x000002092723BB50> = 'MEMORY CONTEXT\nFacts:\n- [general] Fact 0\n- [general] Fact 1\n- [general] Fact 2\n- [general] Fact 3\n- [general] Fact 4\n- [general] Fact 5\n- [general] Fact 6\n- [general] Fact 7\n- [general] Fact 8\n- [general] Fact 9\n- [general] Fact 10\n- [general] Fact 11\n- [general] Fact 12\n- [general] Fact 13\n- [general] Fact 14'.count
FAILED tests/unit/models/test_memory_models.py::TestEdgeCases::test_68_rounding_importance - AssertionError: assert 0.666666 == 0.67
 +  where 0.666666 = NewFact(content='test', fact_type='preference', category='general', importance=0.666666, surprise=0.5, confidence=0.8, ttl_days=None).importance
FAILED tests/unit/models/test_memory_models.py::TestEdgeCases::test_70_uuid_serialization - pydantic_core._pydantic_core.ValidationError: 1 validation error for Fact
id
  Input should be a valid string [type=string_type, input_value=UUID('bb273e5d-d66c-487a-ae7b-911fc2b20f25'), input_type=UUID]
    For further information visit https://errors.pydantic.dev/2.12/v/string_type
FAILED tests/unit/state/test_guard_scenarios.py::test_repeat_height_phase_forces_offer_state - AssertionError: assert 'STATE_3_SIZE_COLOR' == 'STATE_4_OFFER'
  
  - STATE_4_OFFER
  + STATE_3_SIZE_COLOR
FAILED tests/unit/vision/test_hash_guard.py::test_vision_duplicate_hash_guard - AssertionError: assert 0 == 1
 +  where 0 = <AsyncMock id='2238332757984'>.await_count
================ 49 failed, 729 passed, 94 warnings in 44.89s =================
